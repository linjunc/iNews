{"version":3,"sources":["pages/user-setting/components/user-account/style.js","pages/user-setting/components/user-account/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"names":["UserAccountWrapper","styled","div","memo","userInfo","useContext","userInfoContext","useState","is_show_history","isAllowRead","setIsAllowRead","className","onClick","updateShowHistory","a","setShowHistory","res","console","log","module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined"],"mappings":"iLAEaA,E,MAAqBC,EAAOC,IAAV,ghB,OCKhBC,0BAAK,WAClB,IAAMC,EAAWC,qBAAWC,KAC5B,EAAsCC,mBAASH,EAASI,iBAAxD,mBAAOC,EAAP,KAAoBC,EAApB,KAYA,OACE,eAACV,EAAD,WACE,oBAAIW,UAAU,aAAd,sCACA,8BACE,sBAAKA,UAAU,QAAf,UACE,sBAAKA,UAAU,mBAAf,UACE,sBAAMA,UAAU,WAAhB,wGACA,sBAAKA,UAAU,gBAAf,UACE,sBAAMA,UAAU,UAAUC,QAjBP,WAC7BF,GAAgBD,GAChB,IAAMI,EAAiB,uCAAG,4BAAAC,EAAA,sEACNC,YAAe,CAAEP,iBAAkBC,IAD7B,OAClBO,EADkB,OAExBC,QAAQC,IAAIF,GAFY,2CAAH,qDAIvBH,KAWU,0BAGA,sBAAMF,UAAU,QAAhB,SAAyBF,EAAc,eAAO,6BAGlD,sBAAKE,UAAU,mBAAf,UACE,sBAAMA,UAAU,WAAhB,0BACA,qBAAKA,UAAU,gBAAf,SACE,sBAAMA,UAAU,UAAhB,+BAGJ,sBAAKA,UAAU,mBAAf,UACE,sBAAMA,UAAU,WAAhB,sCACA,qBAAKA,UAAU,gBAAf,SACE,sBAAMA,UAAU,UAAhB,2C,oBC5CdQ,EAAOC,QAAU,EAAQ,M,iCCAzB,SAASC,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,GAIxB,SAASS,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIP,SAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMc,EAAGK,MAAMJ,EAAME,GAEzB,SAASd,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOgB,GACdrB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASgB,GAGnEjB,OAAMkB,OA/BZ","file":"static/js/58.ae1a9fb8.chunk.js","sourcesContent":["import styled from 'styled-components'\n\nexport const UserAccountWrapper = styled.div`\n  .item {\n    display: flex;\n    padding: 24px 0;\n    border-bottom: 1px solid #f1f1f1;\n    font-size: 14.4px;\n\n    .tip-text {\n      min-width: 250px;\n      color: #333;\n    }\n\n    .right-wrapper {\n      display: flex;\n      flex-direction: row-reverse;\n      justify-content: space-between;\n      width: 100%;\n\n      .state {\n        margin-left: 20px;\n        color: #909090;\n      }\n\n      .operate {\n        color: #1890ff;\n        cursor: pointer;\n      }\n    }\n  }\n`\n","import React, { memo, useState, useContext } from 'react'\n\nimport { userInfoContext } from '../../../../models/context'\nimport { setShowHistory } from '../../../../services/user'\n\nimport { UserAccountWrapper } from './style'\n\nexport default memo(function UserAccount() {\n  const userInfo = useContext(userInfoContext)\n  const [isAllowRead, setIsAllowRead] = useState(userInfo.is_show_history)\n\n  // 用户点击切换按钮之后更新其他用户浏览个人主页时的权限\n  const changeReadingAuthority = () => {\n    setIsAllowRead(!isAllowRead)\n    const updateShowHistory = async () => {\n      const res = await setShowHistory({ is_show_history: !isAllowRead })\n      console.log(res)\n    }\n    updateShowHistory()\n  }\n\n  return (\n    <UserAccountWrapper>\n      <h1 className=\"main-title\">账号设置</h1>\n      <div>\n        <div className=\"items\">\n          <div className=\"item middle-item\">\n            <span className=\"tip-text\">是否允许他人查看自己的阅读记录</span>\n            <div className=\"right-wrapper\">\n              <span className=\"operate\" onClick={changeReadingAuthority}>\n                切换\n              </span>\n              <span className=\"state\">{isAllowRead ? '允许' : '不允许'}</span>\n            </div>\n          </div>\n          <div className=\"item middle-item\">\n            <span className=\"tip-text\">密码</span>\n            <div className=\"right-wrapper\">\n              <span className=\"operate\">重置</span>\n            </div>\n          </div>\n          <div className=\"item middle-item\">\n            <span className=\"tip-text\">账号注销</span>\n            <div className=\"right-wrapper\">\n              <span className=\"operate\">注销</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </UserAccountWrapper>\n  )\n})\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"sourceRoot":""}