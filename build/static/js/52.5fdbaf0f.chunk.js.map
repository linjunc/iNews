{"version":3,"sources":["pages/user-setting/components/user-profile/components/avatar-input/style.js","pages/user-setting/components/user-profile/components/avatar-input/index.js","pages/user-setting/components/user-profile/components/form-input/style.js","pages/user-setting/components/user-profile/components/form-input/index.js","pages/user-setting/components/user-profile/style.js","pages/user-setting/components/user-profile/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","utils/storage.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","assets/user-center/default-avatar.png","../node_modules/antd/es/avatar/SizeContext.js","../node_modules/antd/es/avatar/avatar.js","../node_modules/antd/es/avatar/group.js","../node_modules/antd/es/avatar/index.js"],"names":["AvatarInputWrapper","styled","div","AvatarInput","props","transmitFormData","avatar","inputRef","useRef","useState","require","default","imageUrl","setImageUrl","beforeUpload","file","isJpgOrPng","type","message","error","isLt5M","size","getBase64","img","reader","FileReader","addEventListener","result","readAsDataURL","className","onClick","current","click","viewBox","d","icon","src","alt","onError","e","target","onerror","noImg","accept","ref","onChange","files","formData","FormData","append","createFormData","FormInputWrapper","TextArea","Input","memo","isIntroduction","maxLength","placeholder","value","nowValue","setNowValue","useEffect","showCount","spellCheck","setSession","valueChange","UserProfileWrapper","setFormData","isBtnLoading","setIsBtnLoading","useContext","userContext","initUserInfo","userInfo","userDispatch","userInfoContext","setUserInfo","setStateFn","introduction","nickname","personal_page","useCallback","loading","originUserName","originIntroduction","nowNickname","getSession","nowIntroduction","warn","reqArr","upLoadAvatarToBed","uploadUserInfo","upload","a","Promise","all","avatarData","infoData","console","log","uploadAvatar","data","url","avatar_url","success","localUserInfo","JSON","parse","getLocal","setLocal","stringify","newUserInfo","isLoading","EDIT_INFO","module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","done","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","itemName","localStorage","getItem","item","setItem","sessionStorage","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread2","i","length","source","forEach","getOwnPropertyDescriptors","defineProperties","SizeContext","React","SizeContextProvider","_ref","children","Consumer","originSize","Provider","__rest","s","t","p","prototype","hasOwnProperty","call","indexOf","propertyIsEnumerable","InternalAvatar","_classNames","_classNames2","groupSize","_React$useState","_React$useState2","_slicedToArray","scale","setScale","_React$useState3","_React$useState4","mounted","setMounted","_React$useState5","_React$useState6","isImgExist","setIsImgExist","avatarNodeRef","avatarChildrenRef","avatarNodeMergeRef","composeRef","getPrefixCls","ConfigContext","setScaleParam","childrenWidth","offsetWidth","nodeWidth","_props$gap","gap","customizePrefixCls","prefixCls","shape","customSize","srcSet","draggable","crossOrigin","others","screens","useBreakpoint","responsiveSizeStyle","_typeof","currentBreakpoint","responsiveArray","find","screen","currentSize","width","height","lineHeight","concat","fontSize","devWarning","childrenToRender","sizeCls","classNames","hasImageElement","classString","sizeStyle","transformString","childrenStyle","msTransform","WebkitTransform","transform","sizeChildrenStyle","ResizeObserver","onResize","node","style","_extends","opacity","Avatar","displayName","defaultProps","Group","_React$useContext","direction","_props$className","maxCount","maxStyle","cls","_props$maxPopoverPlac","maxPopoverPlacement","childrenWithProps","toArray","map","child","index","cloneElement","numOfChildren","childrenShow","slice","childrenHidden","Popover","content","trigger","placement","overlayClassName"],"mappings":"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","file":"static/js/52.5fdbaf0f.chunk.js","sourcesContent":["import styled from 'styled-components'\n\nexport const AvatarInputWrapper = styled.div`\n  margin-bottom: 20px;\n\n  .avatar-info {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-top: 10px;\n\n    .avatar-upload {\n      position: relative;\n      width: 90px;\n      height: 90px;\n      border-radius: 50%;\n      overflow: hidden;\n\n      .upload-input {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        color: #fff;\n        border-radius: 50%;\n        background-color: rgba(29, 33, 41, 0.5);\n        z-index: 2;\n        opacity: 0;\n        cursor: pointer;\n\n        &:hover {\n          opacity: 1;\n        }\n\n        & > .avatar-uploader {\n          height: 90px;\n        }\n\n        & > span {\n          font-size: 14px;\n          margin-top: 7px;\n        }\n\n        .add-icon {\n          width: 20px;\n          height: 20px;\n\n          svg {\n            fill: #fff;\n          }\n        }\n      }\n    }\n\n    .title {\n      margin: 10px 0 8px;\n      color: #1d2129;\n      font-size: 16px;\n    }\n  }\n\n  .upload-tip {\n    line-height: 17px;\n    font-size: 14px;\n    color: #86909c;\n  }\n\n  .ant-avatar {\n    background-color: transparent;\n  }\n`\n","import React, { useRef, useState } from 'react'\n\nimport { Avatar, message } from 'antd'\nimport noImg from '../../../../../../assets/user-center/default-avatar.png'\n\nimport { AvatarInputWrapper } from './style'\n\nexport default function AvatarInput(props) {\n  const { transmitFormData, avatar } = props\n  const inputRef = useRef()\n  const [imageUrl, setImageUrl] = useState(\n    avatar ||\n      require('../../../../../../assets/user-center/default-avatar.png')\n        .default,\n  )\n\n  // 用户点击头像打开本地文件夹的函数\n  const displayFile = () => {\n    inputRef.current.click()\n  }\n\n  // 根据文件生成formData并传递给父组件的函数\n  const createFormData = (file) => {\n    const formData = new FormData()\n    formData.append('image', file)\n    formData.append('key', '7a90dbbff3b9b99f97e481e6b89dead8')\n    // 将formData传递给父组件中\n    transmitFormData(formData)\n  }\n\n  // 文件框的照片改变了之后会执行的函数\n  const uploadAvatar = () => {\n    const file = inputRef.current.files[0]\n    if (beforeUpload(file)) {\n      // 代码执行到这里说明图片格式以及大小满足要求，可以进行预览操作\n      getBase64(file)\n      createFormData(file)\n    }\n  }\n\n  // 用户在文件框中选中对应图片后对图片格式以及规模进行判断，看其是否满足条件\n  const beforeUpload = (file) => {\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\n    if (!isJpgOrPng) {\n      message.error('你只可以上传 JPG/PNG 格式的文件!')\n    }\n    const isLt5M = file.size / 1024 / 1024 < 5\n    if (!isLt5M) {\n      message.error('图片大小必须要小于5MB!')\n    }\n    return isJpgOrPng && isLt5M\n  }\n\n  // 读取用户选中的本地图片\n  const getBase64 = (img) => {\n    const reader = new FileReader()\n    // 当文件读取完成后将图片更新上去\n    reader.addEventListener('load', () => {\n      const result = reader.result\n      setImageUrl(result)\n    })\n    reader.readAsDataURL(img)\n  }\n\n  return (\n    <AvatarInputWrapper>\n      <div className=\"avatar-info\">\n        <div className=\"avatar-upload\" onClick={displayFile}>\n          <div className=\"upload-input\">\n            <i className=\"add-icon\">\n              <svg className=\"icon\" viewBox=\"0 0 1024 1024\">\n                <path\n                  d=\"M464.883436 464.883436V302.244035A23.732788 23.732788 0 0 1 488.616224 279.209271h46.069529a23.732788 23.732788 0 0 1 23.732788 23.034764v162.639401h162.6394a23.732788 23.732788 0 0 1 23.034765 23.732788v46.069529a23.732788 23.732788 0 0 1-23.034765 23.732788H558.418541v162.6394a23.732788 23.732788 0 0 1-23.732788 23.034765H488.616224a23.732788 23.732788 0 0 1-23.732788-23.034765V558.418541H302.244035A23.732788 23.732788 0 0 1 279.209271 534.685753V488.616224a23.732788 23.732788 0 0 1 23.034764-23.732788z m46.767552 465.581458a418.813906 418.813906 0 1 0-418.813906-418.813906 418.813906 418.813906 0 0 0 418.813906 418.813906z m0 92.837083a511.650988 511.650988 0 1 1 511.650989-511.650989 511.650988 511.650988 0 0 1-511.650989 511.650989z\"\n                  p-id=\"375018\"\n                ></path>\n              </svg>\n            </i>\n            <span>点击修改头像</span>\n          </div>\n          <Avatar\n            size={90}\n            icon={\n              <img\n                src={imageUrl}\n                alt=\"头像\"\n                onError={(e) => {\n                  e.target.onerror = null\n                  e.target.src = noImg\n                }}\n              />\n            }\n          />\n          <input\n            type=\"file\"\n            className=\"real-input\"\n            accept=\"image/*\"\n            ref={inputRef}\n            onChange={uploadAvatar}\n          />\n        </div>\n        <span className=\"title\">我的头像</span>\n      </div>\n      <p className=\"upload-tip\">支持 jpg、png、jpeg 格式大小 5M 以内的图片</p>\n    </AvatarInputWrapper>\n  )\n}\n","import styled from 'styled-components'\n\nexport const FormInputWrapper = styled.div`\n  position: relative;\n\n  textarea {\n    width: 440px;\n    padding: 0 48px 0 12px;\n    resize: none;\n    height: 30px;\n    line-height: 30px;\n    color: #1d2129;\n    background-color: #fafafa;\n    box-shadow: none;\n\n    &:focus {\n      background-color: #fff !important;\n      border-color: #1890ff !important;\n    }\n\n    &:hover {\n      border-color: #e5e6eb;\n      background-color: #e5e6eb;\n    }\n  }\n\n  .introduction {\n    textarea {\n      height: 140px;\n    }\n\n    &::after {\n      top: 122px !important;\n    }\n  }\n\n  .ant-input-textarea-show-count::after {\n    position: absolute;\n    right: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    margin-right: 10px;\n    font-size: 12px;\n  }\n`\n","import React, { memo, useState, useEffect } from 'react'\n\nimport { setSession } from '../../../../../../utils/storage'\n\nimport { Input } from 'antd'\n\nimport { FormInputWrapper } from './style'\n\nconst { TextArea } = Input\nexport default memo(function FormInput(props) {\n  const { isIntroduction, maxLength, placeholder, value } = props\n  const [nowValue, setNowValue] = useState(value)\n\n  // value值改变的时候更新nowValue的值\n  useEffect(() => {\n    setNowValue(value)\n  }, [value])\n\n  // 输入框值改变的时候本地数据的改变\n  const valueChange = (value) => {\n    if (isIntroduction) {\n      setSession('introduction', value)\n    } else {\n      setSession('username', value)\n    }\n    setNowValue(value)\n  }\n\n  return (\n    <FormInputWrapper>\n      <TextArea\n        value={nowValue}\n        showCount={true}\n        placeholder={placeholder}\n        maxLength={maxLength}\n        spellCheck=\"false\"\n        className={isIntroduction ? 'introduction' : 'name-input'}\n        onChange={(e) => valueChange(e.target.value)}\n      />\n    </FormInputWrapper>\n  )\n})\n","import styled from 'styled-components'\n\nexport const UserProfileWrapper = styled.div`\n  & > div {\n    flex-direction: column;\n  }\n\n  .items {\n    margin-bottom: 13px;\n    text-align: center;\n\n    .item {\n      display: inline-flex;\n      justify-content: center;\n      width: 556px;\n      padding: 20px 0;\n      border-bottom: 1px solid #f1f1f1;\n\n      .input-title {\n        width: 56px;\n        font-size: 14px;\n        color: #333;\n        margin-right: 20px;\n      }\n    }\n  }\n\n  .btn-wrapper {\n    display: flex;\n    margin: 50px;\n\n    button {\n      min-width: 88px;\n      margin: 0 auto;\n    }\n  }\n`\n","import React, {\n  useEffect,\n  useState,\n  useCallback,\n  useContext,\n  memo,\n} from 'react'\n\nimport {\n  getLocal,\n  getSession,\n  setLocal,\n  setSession,\n} from '../../../../utils/storage'\nimport {\n  uploadAvatar,\n  upLoadAvatarToBed,\n  uploadUserInfo,\n} from '../../../../services/user'\nimport { userContext, userInfoContext } from '../../../../models/context'\nimport { EDIT_INFO } from '../../../../models/constant'\n\nimport { Button, message } from 'antd'\nimport AvatarInput from './components/avatar-input'\nimport FormInput from './components/form-input'\n\nimport { UserProfileWrapper } from './style'\n\nexport default memo(function UserProfile() {\n  // 用于存储头像所对应的formData对象\n  const [formData, setFormData] = useState(null)\n  const [isBtnLoading, setIsBtnLoading] = useState(false)\n  const { userInfo: initUserInfo, userDispatch } = useContext(userContext)\n  const { userInfo, setStateFn: setUserInfo } = useContext(userInfoContext)\n  // 获取头像、个人介绍、用户名，并存储到本地\n  const { avatar, introduction, nickname, personal_page } = userInfo\n  // 用户名要和简介被修改后修改本地存储的数据\n  useEffect(() => {\n    setSession('username', nickname)\n    setSession('introduction', introduction)\n  }, [nickname, introduction])\n\n  // 用于子组件传递给父组件formData的函数\n  const transmitFormData = useCallback(\n    (formData) => {\n      setFormData(formData)\n    },\n    [setFormData],\n  )\n\n  // 用户点击修改按钮后向后台发送修改请求\n  const updateUserInfo = () => {\n    // 原始的用户名和个人简介\n    const originUserName = nickname\n    const originIntroduction = introduction\n    // 现在的用户名和个人简介\n    const nowNickname = getSession('username')\n    const nowIntroduction = getSession('introduction')\n\n    // 只要这三个有一个条件满足，就说明用户有改动他的个人信息，需要发送请求\n    if (\n      formData ||\n      originUserName !== nowNickname ||\n      originIntroduction !== nowIntroduction\n    ) {\n      // 更改后的用户名不能为空\n      if (nowNickname) {\n        setIsBtnLoading(true)\n      } else {\n        message.warn('用户名不能为空！')\n        return\n      }\n\n      // 发送请求对应的promise数组\n      let reqArr = []\n      if (formData) {\n        reqArr[0] = upLoadAvatarToBed(formData)\n      }\n      if (\n        originUserName !== nowNickname ||\n        originIntroduction !== nowIntroduction\n      ) {\n        reqArr[1] = uploadUserInfo({\n          nickname: nowNickname,\n          introduction: nowIntroduction,\n          personal_page,\n        })\n      }\n\n      const upload = async () => {\n        try {\n          const [avatarData, infoData] = await Promise.all(reqArr)\n          console.log(avatarData)\n          console.log(infoData)\n          let avatar = null\n          if (avatarData) {\n            const { data } = await uploadAvatar({\n              avatar: avatarData.data.data.url,\n            })\n            avatar = data?.avatar_url\n          }\n          message.success('个人信息修改成功！')\n\n          // 头像更新之后需要更新存储在本地的用户信息\n          const localUserInfo = JSON.parse(getLocal('userInfo'))\n          avatarData\n            ? (localUserInfo.avatar = avatar)\n            : (avatar = localUserInfo.avatar)\n          infoData && (localUserInfo.nickname = infoData.data.userInfo.nickname)\n          setLocal('userInfo', JSON.stringify(localUserInfo))\n\n          // 更新父组件保存的信息状态以及最顶层的userContext信息\n          const newUserInfo = {\n            ...userInfo,\n            avatar,\n            introduction: nowIntroduction,\n            nickname: nowNickname,\n          }\n          setUserInfo &&\n            setUserInfo({\n              userInfo: newUserInfo,\n              isLoading: false,\n            })\n          userDispatch({\n            type: EDIT_INFO,\n            userInfo: {\n              ...initUserInfo,\n              avatar,\n              nickname: nowNickname,\n            },\n          })\n        } catch (err) {\n          message.error('信息修改错误，请刷新页面重试！')\n        } finally {\n          setIsBtnLoading(false)\n        }\n      }\n      upload()\n    }\n  }\n\n  return (\n    <UserProfileWrapper>\n      <h1 className=\"main-title\">个人资料</h1>\n      <div className=\"middle-item\">\n        <AvatarInput transmitFormData={transmitFormData} avatar={avatar} />\n      </div>\n      <form className=\"items\">\n        <div className=\"item middle-item\">\n          <span className=\"input-title\">用户名</span>\n          <FormInput\n            value={nickname}\n            maxLength={30}\n            placeholder=\"请输入您的用户名\"\n          />\n        </div>\n        <div className=\"item middle-item\">\n          <span className=\"input-title\">简介</span>\n          <FormInput\n            value={introduction}\n            maxLength={100}\n            placeholder=\"请输入个人简介\"\n            isIntroduction={true}\n          />\n        </div>\n      </form>\n      <div className=\"btn-wrapper\">\n        <Button type=\"primary\" loading={isBtnLoading} onClick={updateUserInfo}>\n          保存修改\n        </Button>\n      </div>\n    </UserProfileWrapper>\n  )\n})\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","// 从本地存储中获取数据的函数\nexport const getLocal = (itemName) => {\n  return localStorage.getItem(itemName)\n}\n\n// 存取数据到本地的函数\nexport const setLocal = (itemName, item) => {\n  localStorage.setItem(itemName, item)\n}\n\n// 从会话存储中获取数据的函数\nexport const getSession = (itemName) => {\n  return sessionStorage.getItem(itemName)\n}\n\n// 存取数据到会话数据的函数\nexport const setSession = (itemName, item) => {\n  sessionStorage.setItem(itemName, item)\n}\n\n// 将取出来数据中的实体字符转为innerHTML能够解析成的标签形式\n// const escapeHtml = str => {\n//   const arrEntities = { lt: '<', gt: '>', nbsp: ' ', amp: '&', quot: '\"' }\n//   return (\n//     str && str.replace(/&(lt|gt|nbsp|amp|quot);/gi, function (all, t) {\n//       return arrEntities[t]\n//     })\n//   )\n// }\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE50lEQVR4nO1avYobSRD2I+gNVk9g9AAO/AjOnCrwA+gBDjbbmf5qoMGxQdHFgksWRxM4NNxEF9kgjoODYwPBBQv3t7rganQ15Z5RV/eMxhh9MNFud/32V9VdevbsiiuuuGImeO8XRVEs59ZjUrCRL4noFkANoAGwB3AAcBTfnv++IyJfFMXLuXVPRms0gG3AUOu3A7Ce26YoeO8XROR7jD5wlJs2ys65DRHdcnZsOQP2fc4gIj+3jUF47xcA1gHlDwBq59zGe7+w7Mn77XocuZ7IFDs41RulZANgbTW6D865VwHnNrPzhHNuo9L9kBJto7yOI5xzmylkDUKc9YsYrsGOmIcb+LzvlPGvLqYAA8BKZV8zeQACxjdzNjJFUSwV/9STClRpn+TxoiiWXP48l74tEd3mZBGXz1PfkLrPINS5MxvfUy36Gp+VZW/OTLn32mTcOajzdrAoyGv7DB/qErcWHdkJp/1GLZHCABPhcdQ7ZZK7vpXOIK7120CtXxrlnWQZTOyHTH0iuo1dF2DpOiZzeJ2s9QfLccN/HeQ4R4HTqlVmH6uIWndMbIVlNpjYXcjOywJOV3PHJdflNCmpxCazwJK1HShSiY4+12bzuoG9ks605K2kXoVJyex9yRljdIhyPwuzZ3MB/u/4rCTUNiWNWWgAnIlJpVFkoq05UiRmWjzG2Q/suU9xqiBSGxmmpr88s8nkE0CqIal2dFjc2IicHDDmPV2WRMu65OMjzr8p5aTAkTOg1WefsLatBvG9hCAy8/UymXiG99xn6FObnScEmliX156qh3Vtz36rnKwSV/h4fXKYPLv+Ksg3iJQbnuSzqHKey+SKeNK6MIZi8aTXHhWQ89d4aUAqk6vHkyTF9SNH6v1eOiA6GGMwOboXmZ2xm1wJLslqqlQrvYxVIJvJ9ZUYERMd7/0iMGvIeu1N6iGSamcAgVfbI4Cdc27DE+PnAFZieqz/t8596k7qaZJq5wCI6Hvn3FEZN/T9PtagJSmYsvTkKHFmWnzu2+d2k+pNI76nSb5ECMEDhjdE9IGIfiCi9wDu+fvY56hUEpR2mN4mlOdMRMgvs3tlRM3kdrYOt4OTwB5NVB0XQOKbRrvYfAVVk6MjIl+C+8AR7BCjpTdB4ptGuzi6peWM2Yr/H/VHDIFp8FluUOlvb+hUSztYDaCmxTlR74MaepwNiqhk6e24vEj0CVTRmcT4FtoJfcQmo5/1NKe6uS+4gAUlzQxTocdfOrrqDmEnPw30DBm0oEsY30I5oUNwqaO8QciS1N7K1PRntOcvg047rRO688isoUwHOu24h28FTf/TlAA0SQfmkeP+bEeVxd9i2XhKqL7j/eQZiS/n9/kkkwH1Cp3P+jEgog/CAY9z/kiqqqobAH8KfaY/jiz0UQh9AvB6UqEBFEXxBsBfswUDwGfVlEzz6ywFDsA9O76V/0tVVTeXkN8BKyI54dE5924qeXd3dxuVfRdzfC8AvAHwz1SO8N4vQoZzBhRjyBgFzrnQT9uPRPQZwFvLXlVV3ZRl+R0R/QTg74Dh97OkfAwCx0J+D0T0q3PuExHVzrl3/O2I6EcADxzpp8DaJyKqiej53DZGgTPiYcAZMd8Td5z3ZVm+mNumZAAoOMIHVbq0sX9wBvwM4O1Xm+ZjoSzLFwBef/OGXnHFFV8t/gWFCJ5xlnjv0QAAAABJRU5ErkJggg==\"","import * as React from 'react';\nvar SizeContext = /*#__PURE__*/React.createContext('default');\nexport var SizeContextProvider = function SizeContextProvider(_ref) {\n  var children = _ref.children,\n      size = _ref.size;\n  return /*#__PURE__*/React.createElement(SizeContext.Consumer, null, function (originSize) {\n    return /*#__PURE__*/React.createElement(SizeContext.Provider, {\n      value: size || originSize\n    }, children);\n  });\n};\nexport default SizeContext;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport ResizeObserver from 'rc-resize-observer';\nimport { composeRef } from \"rc-util/es/ref\";\nimport { ConfigContext } from '../config-provider';\nimport devWarning from '../_util/devWarning';\nimport { responsiveArray } from '../_util/responsiveObserve';\nimport useBreakpoint from '../grid/hooks/useBreakpoint';\nimport SizeContext from './SizeContext';\n\nvar InternalAvatar = function InternalAvatar(props, ref) {\n  var _classNames, _classNames2;\n\n  var groupSize = React.useContext(SizeContext);\n\n  var _React$useState = React.useState(1),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      scale = _React$useState2[0],\n      setScale = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      mounted = _React$useState4[0],\n      setMounted = _React$useState4[1];\n\n  var _React$useState5 = React.useState(true),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      isImgExist = _React$useState6[0],\n      setIsImgExist = _React$useState6[1];\n\n  var avatarNodeRef = React.useRef();\n  var avatarChildrenRef = React.useRef();\n  var avatarNodeMergeRef = composeRef(ref, avatarNodeRef);\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls;\n\n  var setScaleParam = function setScaleParam() {\n    if (!avatarChildrenRef.current || !avatarNodeRef.current) {\n      return;\n    }\n\n    var childrenWidth = avatarChildrenRef.current.offsetWidth; // offsetWidth avoid affecting be transform scale\n\n    var nodeWidth = avatarNodeRef.current.offsetWidth; // denominator is 0 is no meaning\n\n    if (childrenWidth !== 0 && nodeWidth !== 0) {\n      var _props$gap = props.gap,\n          gap = _props$gap === void 0 ? 4 : _props$gap;\n\n      if (gap * 2 < nodeWidth) {\n        setScale(nodeWidth - gap * 2 < childrenWidth ? (nodeWidth - gap * 2) / childrenWidth : 1);\n      }\n    }\n  };\n\n  React.useEffect(function () {\n    setMounted(true);\n  }, []);\n  React.useEffect(function () {\n    setIsImgExist(true);\n    setScale(1);\n  }, [props.src]);\n  React.useEffect(function () {\n    setScaleParam();\n  }, [props.gap]);\n\n  var handleImgLoadError = function handleImgLoadError() {\n    var onError = props.onError;\n    var errorFlag = onError ? onError() : undefined;\n\n    if (errorFlag !== false) {\n      setIsImgExist(false);\n    }\n  };\n\n  var customizePrefixCls = props.prefixCls,\n      shape = props.shape,\n      customSize = props.size,\n      src = props.src,\n      srcSet = props.srcSet,\n      icon = props.icon,\n      className = props.className,\n      alt = props.alt,\n      draggable = props.draggable,\n      children = props.children,\n      crossOrigin = props.crossOrigin,\n      others = __rest(props, [\"prefixCls\", \"shape\", \"size\", \"src\", \"srcSet\", \"icon\", \"className\", \"alt\", \"draggable\", \"children\", \"crossOrigin\"]);\n\n  var size = customSize === 'default' ? groupSize : customSize;\n  var screens = useBreakpoint();\n  var responsiveSizeStyle = React.useMemo(function () {\n    if (_typeof(size) !== 'object') {\n      return {};\n    }\n\n    var currentBreakpoint = responsiveArray.find(function (screen) {\n      return screens[screen];\n    });\n    var currentSize = size[currentBreakpoint];\n    return currentSize ? {\n      width: currentSize,\n      height: currentSize,\n      lineHeight: \"\".concat(currentSize, \"px\"),\n      fontSize: icon ? currentSize / 2 : 18\n    } : {};\n  }, [screens, size]);\n  devWarning(!(typeof icon === 'string' && icon.length > 2), 'Avatar', \"`icon` is using ReactNode instead of string naming in v4. Please check `\".concat(icon, \"` at https://ant.design/components/icon\"));\n  var prefixCls = getPrefixCls('avatar', customizePrefixCls);\n  var sizeCls = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-lg\"), size === 'large'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-sm\"), size === 'small'), _classNames));\n  var hasImageElement = /*#__PURE__*/React.isValidElement(src);\n  var classString = classNames(prefixCls, sizeCls, (_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-\").concat(shape), !!shape), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-image\"), hasImageElement || src && isImgExist), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-icon\"), !!icon), _classNames2), className);\n  var sizeStyle = typeof size === 'number' ? {\n    width: size,\n    height: size,\n    lineHeight: \"\".concat(size, \"px\"),\n    fontSize: icon ? size / 2 : 18\n  } : {};\n  var childrenToRender;\n\n  if (typeof src === 'string' && isImgExist) {\n    childrenToRender = /*#__PURE__*/React.createElement(\"img\", {\n      src: src,\n      draggable: draggable,\n      srcSet: srcSet,\n      onError: handleImgLoadError,\n      alt: alt,\n      crossOrigin: crossOrigin\n    });\n  } else if (hasImageElement) {\n    childrenToRender = src;\n  } else if (icon) {\n    childrenToRender = icon;\n  } else if (mounted || scale !== 1) {\n    var transformString = \"scale(\".concat(scale, \") translateX(-50%)\");\n    var childrenStyle = {\n      msTransform: transformString,\n      WebkitTransform: transformString,\n      transform: transformString\n    };\n    var sizeChildrenStyle = typeof size === 'number' ? {\n      lineHeight: \"\".concat(size, \"px\")\n    } : {};\n    childrenToRender = /*#__PURE__*/React.createElement(ResizeObserver, {\n      onResize: setScaleParam\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-string\"),\n      ref: function ref(node) {\n        avatarChildrenRef.current = node;\n      },\n      style: _extends(_extends({}, sizeChildrenStyle), childrenStyle)\n    }, children));\n  } else {\n    childrenToRender = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-string\"),\n      style: {\n        opacity: 0\n      },\n      ref: function ref(node) {\n        avatarChildrenRef.current = node;\n      }\n    }, children);\n  } // The event is triggered twice from bubbling up the DOM tree.\n  // see https://codesandbox.io/s/kind-snow-9lidz\n\n\n  delete others.onError;\n  delete others.gap;\n  return /*#__PURE__*/React.createElement(\"span\", _extends({}, others, {\n    style: _extends(_extends(_extends({}, sizeStyle), responsiveSizeStyle), others.style),\n    className: classString,\n    ref: avatarNodeMergeRef\n  }), childrenToRender);\n};\n\nvar Avatar = /*#__PURE__*/React.forwardRef(InternalAvatar);\nAvatar.displayName = 'Avatar';\nAvatar.defaultProps = {\n  shape: 'circle',\n  size: 'default'\n};\nexport default Avatar;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport { cloneElement } from '../_util/reactNode';\nimport { ConfigContext } from '../config-provider';\nimport Avatar from './avatar';\nimport Popover from '../popover';\nimport { SizeContextProvider } from './SizeContext';\n\nvar Group = function Group(props) {\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var customizePrefixCls = props.prefixCls,\n      _props$className = props.className,\n      className = _props$className === void 0 ? '' : _props$className,\n      maxCount = props.maxCount,\n      maxStyle = props.maxStyle,\n      size = props.size;\n  var prefixCls = getPrefixCls('avatar-group', customizePrefixCls);\n  var cls = classNames(prefixCls, _defineProperty({}, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), className);\n  var children = props.children,\n      _props$maxPopoverPlac = props.maxPopoverPlacement,\n      maxPopoverPlacement = _props$maxPopoverPlac === void 0 ? 'top' : _props$maxPopoverPlac;\n  var childrenWithProps = toArray(children).map(function (child, index) {\n    return cloneElement(child, {\n      key: \"avatar-key-\".concat(index)\n    });\n  });\n  var numOfChildren = childrenWithProps.length;\n\n  if (maxCount && maxCount < numOfChildren) {\n    var childrenShow = childrenWithProps.slice(0, maxCount);\n    var childrenHidden = childrenWithProps.slice(maxCount, numOfChildren);\n    childrenShow.push( /*#__PURE__*/React.createElement(Popover, {\n      key: \"avatar-popover-key\",\n      content: childrenHidden,\n      trigger: \"hover\",\n      placement: maxPopoverPlacement,\n      overlayClassName: \"\".concat(prefixCls, \"-popover\")\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      style: maxStyle\n    }, \"+\".concat(numOfChildren - maxCount))));\n    return /*#__PURE__*/React.createElement(SizeContextProvider, {\n      size: size\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cls,\n      style: props.style\n    }, childrenShow));\n  }\n\n  return /*#__PURE__*/React.createElement(SizeContextProvider, {\n    size: size\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cls,\n    style: props.style\n  }, childrenWithProps));\n};\n\nexport default Group;","import InternalAvatar from './avatar';\nimport Group from './group';\nvar Avatar = InternalAvatar;\nAvatar.Group = Group;\nexport { Group };\nexport default Avatar;"],"sourceRoot":""}