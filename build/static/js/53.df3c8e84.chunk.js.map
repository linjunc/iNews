{"version":3,"sources":["pages/user/components/right-container/style.js","pages/user/components/right-container/index.js","pages/user/components/operate-btn/style.js","pages/user/components/operate-btn/index.js","pages/user/components/base-info/style.js","pages/user/components/base-info/index.js","pages/user/components/headline/style.js","pages/user/components/headline/index.js","pages/user/style.js","pages/user/index.jsx","utils/storage.js","utils/scrollHeight.js","assets/user-center/default-avatar.png","assets/user-center/report-enter.png","assets/user-center/go-back1.png","assets/user-center/go-back2.png"],"names":["RightContainerWrapper","styled","div","require","default","UserAchievementWrapper","CollectionInfoWrapper","FollowNumWrapper","memo","props","isSelf","userInfo","downLoadReport","id","useParams","navigate","useNavigate","pathname","useLocation","reply_count","like_count","tag_count","join_date","follow_count","follower_count","digg_count","discoveryData","title","icon","bottomData","num","to","className","map","item","xmlns","width","height","cx","cy","r","fill","d","index","substring","length","CSSTransition","timeout","classNames","in","appear","onClick","e","type","EditBtnWrapper","button","ConcernBtnWrapper","concernUserFn","isFollow","useContext","allUserInfoContext","styleInfo","style","BaseInfoWrapper","avatar","introduction","nickname","alt","src","onError","target","onerror","noImg","viewBox","marginBottom","ListHeaderWrapper","isShowHistory","useState","isFixed","setIsFixed","topValue","useRef","scrollTop","fixNav","throttle","getScrollTop","setTimeout","current","useEffect","window","addEventListener","removeEventListener","goTop","scrollTo","linkData","splice","size","end","display","UserCenterWrapper","LeftContainerWrapper","ContentWrapper","UserCenter","user_id","self_id","JSON","parse","getLocal","flag","isContentShow","setIsContentShow","domRef","getReportDom","useCallback","dom","calendarData","contextInfo","setContextInfo","getInfo","a","reqArr","getUserInfo","getSpendTimeYearly","Promise","all","resArr","data","is_follow","date","Date","count","message","error","FocusAuthor","media_id","warn","html2canvas","then","canvas","imgUrl","toDataURL","document","createElement","event","MouseEvent","download","href","dispatchEvent","Provider","value","active","loading","paragraph","rows","round","is_show_history","itemName","localStorage","getItem","setLocal","setItem","getSession","sessionStorage","setSession","documentElement","body"],"mappings":"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","file":"static/js/53.df3c8e84.chunk.js","sourcesContent":["import styled from 'styled-components'\n\nexport const RightContainerWrapper = styled.div`\n  flex: 0 0 auto;\n  margin-left: 12px;\n  width: 240px;\n  line-height: 1.2;\n\n  .sticky {\n    position: fixed;\n    top: 76px;\n    width: 240px;\n    transition: all 0.2s;\n  }\n\n  .report-enter {\n    width: 100%;\n    height: 122px;\n    margin-top: 10px;\n    background: url(${require('../../../../assets/user-center/report-enter.png')\n        .default})\n      no-repeat;\n    background-size: cover;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n\n  .report-appear {\n    max-height: 0;\n  }\n\n  .report-appear-active {\n    max-height: 120px;\n    transition: max-height 1s;\n  }\n\n  .operate-area {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 15px;\n\n    .go-back {\n      width: 32px;\n      height: 32px;\n      background-image: url(${require('../../../../assets/user-center/go-back1.png')\n        .default});\n      background-size: cover;\n      cursor: pointer;\n\n      &:hover {\n        background-image: url(${require('../../../../assets/user-center/go-back2.png')\n          .default});\n      }\n    }\n  }\n`\n\nexport const UserAchievementWrapper = styled.div`\n  background-color: #fff;\n  margin-bottom: 12px;\n\n  .title {\n    padding: 15px;\n    font-size: 16px;\n    font-weight: 600;\n    color: #31445b;\n    border-bottom: 1px solid rgba(230, 230, 231, 0.5);\n  }\n\n  .items {\n    padding: 15px;\n\n    .item {\n      display: flex;\n      align-items: center;\n\n      &:nth-child(n + 2) {\n        margin-top: 12px;\n      }\n\n      svg {\n        margin-right: 14.4px;\n      }\n\n      span {\n        display: inline-block;\n        font-size: 15px;\n        color: #000;\n      }\n    }\n  }\n`\n\nexport const CollectionInfoWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  a,\n  & > div {\n    display: flex;\n    justify-content: space-between;\n    padding: 15px 5px;\n    font-size: 15px;\n    color: #000;\n    border-top: 1px solid rgba(230, 230, 231, 0.5);\n    cursor: pointer;\n\n    &:hover {\n      opacity: 0.8;\n    }\n  }\n`\n\nexport const FollowNumWrapper = styled.div`\n  display: flex;\n  margin-bottom: 12px;\n  background-color: #fff;\n  border-radius: 2px;\n\n  a {\n    flex: 1;\n    padding: 16px 0;\n\n    p {\n      text-align: center;\n      color: #31445b;\n    }\n\n    .title {\n      font-size: 16px;\n    }\n\n    .concern-num {\n      margin-top: 6px;\n      font-size: 15px;\n      font-weight: 700;\n    }\n  }\n`\n","import React, { memo } from 'react'\nimport { useNavigate, useLocation, Link, useParams } from 'react-router-dom'\nimport { CSSTransition } from 'react-transition-group'\n\nimport { Button } from 'antd'\n\nimport {\n  RightContainerWrapper,\n  UserAchievementWrapper,\n  CollectionInfoWrapper,\n  FollowNumWrapper,\n} from './style'\n\nexport default memo(function RightContainer(props) {\n  const { isSelf, userInfo, downLoadReport } = props\n  const { id } = useParams()\n\n  const navigate = useNavigate()\n  const { pathname } = useLocation()\n\n  const {\n    reply_count,\n    like_count,\n    tag_count,\n    join_date,\n    follow_count,\n    follower_count,\n    digg_count,\n  } = userInfo\n\n  const discoveryData = [\n    {\n      title: `贡献了 ${digg_count || 0} 次点赞`,\n      icon: 'M8.596 11.238V19H7.033C6.463 19 6 18.465 6 17.807v-5.282c0-.685.483-1.287 1.033-1.287h1.563zm4.275-4.156A1.284 1.284 0 0 1 14.156 6c.885.016 1.412.722 1.595 1.07.334.638.343 1.687.114 2.361-.207.61-.687 1.412-.687 1.412h3.596c.38 0 .733.178.969.488.239.317.318.728.21 1.102l-1.628 5.645a1.245 1.245 0 0 1-1.192.922h-7.068v-7.889c1.624-.336 2.623-2.866 2.806-4.029z',\n    },\n    {\n      title: `关注了 ${follow_count || 0} 位作者`,\n      icon: 'M4 12.5S6.917 7 12.75 7s8.75 5.5 8.75 5.5-2.917 5.5-8.75 5.5S4 12.5 4 12.5zm8.75 2.292c1.208 0 2.188-1.026 2.188-2.292 0-1.266-.98-2.292-2.188-2.292-1.208 0-2.188 1.026-2.188 2.292 0 1.266.98 2.292 2.188 2.292z',\n    },\n    {\n      title: `发送了 ${reply_count || 0} 个评论`,\n      icon: 'M16.694 13.516l-3.719 3.055a1.1 1.1 0 0 1-1.412-.013l-2.77-2.362-3.597 2.437a.693.693 0 0 1-.895-.101.649.649 0 0 1-.008-.876l3.68-4.096a1.1 1.1 0 0 1 1.507-.122l2.653 2.135 2.248-2.4-1.34-1.358a.5.5 0 0 1 .327-.85l5.438-.313a.5.5 0 0 1 .528.533l-.368 5.449a.5.5 0 0 1-.855.317l-1.417-1.435z',\n    },\n  ]\n\n  const bottomData = [\n    {\n      title: '收藏数',\n      num: like_count || 0,\n      to: `/user/${id}/collect`,\n    },\n    {\n      title: '关注标签',\n      num: tag_count || 0,\n      to: `/user/${id}/concern/tags`,\n    },\n    {\n      title: '加入于',\n      num: join_date,\n    },\n  ]\n\n  return (\n    <RightContainerWrapper>\n      <div className=\"sticky\">\n        <UserAchievementWrapper>\n          <div className=\"title\">探索之旅</div>\n          <div className=\"items\">\n            {discoveryData.map((item) => {\n              return (\n                <div className=\"item\" key={item.title}>\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"25\"\n                    height=\"26\"\n                  >\n                    <g>\n                      <circle\n                        cx=\"12.5\"\n                        cy=\"12.5\"\n                        r=\"12.5\"\n                        fill=\"#E1EFFF\"\n                      ></circle>\n                      <path fill=\"#7BB9FF\" d={item.icon}></path>\n                    </g>\n                  </svg>\n                  <span>{item.title}</span>\n                </div>\n              )\n            })}\n          </div>\n        </UserAchievementWrapper>\n        <FollowNumWrapper>\n          <Link to={`/user/${id}/concern/following`}>\n            <p className=\"title\">关注了</p>\n            <p className=\"concern-num\">{follow_count || 0}</p>\n          </Link>\n          <Link to={`/user/${id}/concern/followers`}>\n            <p className=\"title\">关注者</p>\n            <p className=\"concern-num\">{follower_count || 0}</p>\n          </Link>\n        </FollowNumWrapper>\n        <CollectionInfoWrapper>\n          {bottomData.map((item, index) => {\n            const { title, num, to } = item\n            return to ? (\n              <Link to={to} key={title}>\n                <span>{title}</span>\n                <span>{num || 0}</span>\n              </Link>\n            ) : (\n              <div key={title}>\n                <span>{title}</span>\n                <span>{num || 0}</span>\n              </div>\n            )\n          })}\n        </CollectionInfoWrapper>\n        {isSelf &&\n          (() => {\n            // 根据路径判断用户当前是否处于年度报告页面，如果在，则不显示图片\n            const flagStr = pathname.substring(pathname.length - 6)\n            return flagStr !== 'report' ? (\n              <CSSTransition\n                timeout={1000}\n                classNames=\"report\"\n                in={true}\n                appear\n              >\n                <div\n                  className=\"report-enter\"\n                  title=\"打开年度报告\"\n                  onClick={(e) => navigate('report')}\n                ></div>\n              </CSSTransition>\n            ) : (\n              <div className=\"operate-area\">\n                <div\n                  className=\"go-back\"\n                  title=\"回退\"\n                  onClick={(e) => navigate(-1)}\n                ></div>\n                <Button\n                  type=\"primary\"\n                  title=\"下载年度报告\"\n                  onClick={downLoadReport}\n                >\n                  下载年度报告\n                </Button>\n              </div>\n            )\n          })()}\n      </div>\n    </RightContainerWrapper>\n  )\n})\n","import styled from 'styled-components'\n\nexport const EditBtnWrapper = styled.button`\n  width: 118px;\n  height: 32px;\n  background-color: #fff;\n  border-radius: 4px;\n  border: 1px solid #1890ff;\n  transition: all 0.3s;\n  border-radius: 4px;\n  font-size: 15px;\n  font-weight: 500;\n  color: #1890ff;\n  cursor: pointer;\n  outline: none;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`\n\nexport const ConcernBtnWrapper = styled.button`\n  width: 118px;\n  height: 32px;\n  transition: all 0.3s;\n  border-radius: 4px;\n  border: 1px solid #1890ff;\n  cursor: pointer;\n  outline: none;\n  font-size: 15px;\n\n  &.has-follow {\n    background-color: #1890ff;\n    color: #fff;\n  }\n\n  &.not-follow {\n    background-color: #fff;\n    color: #1890ff;\n  }\n`\n","import React, { memo, useContext } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { allUserInfoContext } from '../../../../models/context'\n\nimport { EditBtnWrapper, ConcernBtnWrapper } from './style'\n\nexport default memo(function OperateBtn(props) {\n  const { isSelf, concernUserFn } = props\n  const { isFollow } = useContext(allUserInfoContext)\n\n  const styleInfo =\n    !isSelf &&\n    (() => {\n      return isFollow\n        ? {\n            className: 'has-follow',\n            title: '已关注',\n          }\n        : {\n            className: 'not-follow',\n            title: '关注',\n          }\n    })()\n\n  return (\n    <>\n      {isSelf ? (\n        <Link to=\"/user/setting\">\n          <EditBtnWrapper style={props.style}> 编辑个人信息</EditBtnWrapper>\n        </Link>\n      ) : (\n        <ConcernBtnWrapper\n          className={styleInfo.className}\n          style={props.style}\n          title={styleInfo.title}\n          onClick={concernUserFn}\n        >\n          {styleInfo.title}\n        </ConcernBtnWrapper>\n      )}\n    </>\n  )\n})\n","import styled from 'styled-components'\n\nexport const BaseInfoWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 8px;\n  padding-top: 5px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 5%);\n  min-height: 189px;\n\n  .avatar {\n    flex: 0 0 auto;\n    width: 70px;\n    height: 70px;\n    background-color: #f9f9f9;\n    border-radius: 50%;\n  }\n\n  .info-box {\n    flex-direction: column;\n    flex: 1 1 auto;\n    font-size: 14px;\n    color: #72777b;\n\n    .user-name {\n      margin-bottom: 4px;\n      max-width: 400px;\n\n      span {\n        font-size: 20px;\n        font-weight: 700;\n        line-height: 1.2;\n        color: #000;\n      }\n\n      img {\n        margin: 0 0 9px 4px;\n      }\n    }\n\n    .brief {\n      svg {\n        height: 21.6px;\n        margin-right: 7.2px;\n      }\n\n      span {\n        vertical-align: top;\n      }\n    }\n  }\n\n  .action-box {\n    justify-content: space-between;\n    margin: 2px 0;\n\n    .link-box {\n      display: flex;\n      justify-content: space-between;\n      width: 87px;\n    }\n  }\n`\n","import React, { useContext, memo } from 'react'\n\nimport { allUserInfoContext } from '../../../../models/context'\n\nimport noImg from '../../../../assets/user-center/default-avatar.png'\nimport OperateBtn from '../operate-btn'\n\nimport { BaseInfoWrapper } from './style'\n\nexport default memo(function BaseInfo(props) {\n  // 从context中获取用户信息\n  const { userInfo } = useContext(allUserInfoContext)\n  const { isSelf, concernUserFn } = props\n\n  // 获取头像、个人介绍、用户名\n  const { avatar, introduction, nickname } = userInfo\n\n  return (\n    <BaseInfoWrapper>\n      <img\n        className=\"avatar\"\n        alt=\"用户头像\"\n        src={\n          avatar ||\n          require('../../../.././assets/user-center/default-avatar.png').default\n        }\n        onError={(e) => {\n          e.target.onerror = null\n          e.target.src = noImg\n        }}\n      />\n      <div className=\"info-box middle-item\">\n        <div className=\"user-name middle-item\">\n          <span className=\"text-nowrap\">{nickname}</span>\n        </div>\n        <div className=\"brief middle-item\">\n          <svg width=\"21\" height=\"18\" viewBox=\"0 0 21 18\">\n            <path\n              fill=\"#72777B\"\n              d=\"M4 4h13a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1zm9 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3 3a3 3 0 0 0-6 0h6zM5 7v1h4V7H5zm0 2.5v1h4v-1H5zM5 12v1h4v-1H5z\"\n            ></path>\n          </svg>\n          <span>{introduction || '该用户暂无简介'}</span>\n        </div>\n      </div>\n\n      <div className=\"action-box middle-item\">\n        <div className=\"link-box\">\n          <div title=\"绑定微博\">\n            <svg width=\"21\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\">\n              <g>\n                <path\n                  fill=\"#909090\"\n                  d=\"M15.343 8.474c-.268-.08-.452-.135-.311-.489.304-.767.335-1.429.005-1.9-.619-.887-2.312-.839-4.252-.025 0 0-.61.267-.454-.217.299-.961.254-1.767-.21-2.232-1.054-1.055-3.853.04-6.254 2.445-1.798 1.802-2.842 3.711-2.842 5.362 0 3.158 4.042 5.078 7.996 5.078 5.184 0 8.633-3.018 8.633-5.413 0-1.448-1.217-2.27-2.31-2.609zm-6.311 6.89c-3.156.312-5.88-1.117-6.084-3.193-.205-2.075 2.187-4.01 5.342-4.323 3.156-.313 5.88 1.117 6.085 3.191.204 2.077-2.187 4.012-5.343 4.325z\"\n                ></path>\n                <path\n                  fill=\"#909090\"\n                  d=\"M18.786 2.695a5.039 5.039 0 0 0-4.803-1.558.731.731 0 0 0 .304 1.43 3.584 3.584 0 0 1 3.415 1.108 3.6 3.6 0 0 1 .75 3.516.73.73 0 0 0 1.39.451v-.003a5.06 5.06 0 0 0-1.056-4.944\"\n                ></path>\n                <path\n                  fill=\"#909090\"\n                  d=\"M16.863 4.433a2.453 2.453 0 0 0-2.34-.758.63.63 0 0 0 .263 1.23v.002a1.202 1.202 0 0 1 1.394 1.548.629.629 0 0 0 1.195.387 2.462 2.462 0 0 0-.512-2.409\"\n                ></path>\n                <path\n                  fill=\"#909090\"\n                  d=\"M9.347 9.445c-1.501-.391-3.199.359-3.85 1.684-.665 1.352-.023 2.853 1.494 3.344 1.572.507 3.424-.27 4.068-1.73.635-1.426-.158-2.895-1.712-3.298zm-1.146 3.453c-.306.488-.96.702-1.451.476-.486-.221-.629-.788-.324-1.263.302-.474.934-.685 1.422-.48.495.211.652.774.353 1.267zm1.005-1.293c-.11.189-.354.28-.545.201-.188-.077-.247-.289-.14-.474.11-.185.344-.276.531-.201.19.07.26.284.154.474z\"\n                ></path>\n              </g>\n            </svg>\n          </div>\n          <div title=\"绑定 GitHub\">\n            <svg width=\"21\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path\n                fill=\"#909090\"\n                d=\"M1.857 9.203c0 3.624 2.456 6.698 5.862 7.782.429.076.585-.177.585-.395 0-.194-.007-.71-.012-1.395-2.384.496-2.887-1.1-2.887-1.1-.39-.947-.952-1.2-.952-1.2-.778-.508.06-.498.06-.498.86.058 1.312.846 1.312.846.765 1.253 2.007.89 2.495.68.078-.529.3-.89.544-1.095-1.903-.207-3.904-.911-3.904-4.054 0-.896.334-1.628.882-2.201-.088-.208-.383-1.042.084-2.171 0 0 .72-.22 2.357.84a8.557 8.557 0 0 1 2.146-.276 8.566 8.566 0 0 1 2.146.277c1.636-1.062 2.354-.841 2.354-.841.468 1.129.174 1.963.086 2.17.55.574.881 1.306.881 2.202 0 3.15-2.004 3.844-3.913 4.047.307.253.581.754.581 1.52 0 1.096-.01 1.98-.01 2.25 0 .219.154.474.589.394C16.546 15.898 19 12.825 19 9.203 19 4.673 15.162 1 10.428 1c-4.733 0-8.57 3.672-8.57 8.203z\"\n              ></path>\n            </svg>\n          </div>\n          <div title=\"设置个人主页地址\">\n            <svg width=\"21\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path\n                fill=\"#909090\"\n                d=\"M12.956 5.684l-.04.08-.472-.043.1-.432.412.395m-1.459-1.84l-.663-.29c.452-.216.55-.17.663.29m1.683.133l-.11.02-2.015-2.098 2.394 1.091c-.271.228-.428.554-.269.987M10.334 1.93l.564-.205.078.074c-.11.127-.208.269-.339.366-.025.02-.175-.133-.303-.235m.018.619c.517.025.862.358 1.221.667l-.078.14-1.209-.688.066-.119M8.885 2.42c.202.051.393.085.57.157.03.012.03.253-.013.274-.146.076-.318.101-.49.149l-.067-.58m2.267 10.777c-.182-.2-.338-.423-.5-.64-.276-.366-.293-.75-.065-1.145.07-.122.152-.253.17-.388.035-.271-.13-.335-.376-.359-.18-.018-.463-.107-.503-.23-.189-.588-.728-.62-1.152-.773-.428-.153-.745-.336-.924-.78-.129-.318-.336-.603-.508-.903l-.05.018.167.739c-.112-.174-.185-.25-.215-.34-.207-.623-.481-1.237-.576-1.878-.055-.371.183-.788.292-1.183.016-.057.079-.112.073-.163a18.42 18.42 0 0 0-.13-.918c-.072-.432-.29-.504-.633-.22-.111.093-.232.172-.348.258l-.096-.101c.225-.28.41-.608.682-.826.39-.314.724-.756 1.386-.535.344.115.715.18 1.074.291.308.095.695-.076 1.047-.13L9.95 2.88l.515.339c.045.25-.04.443-.388.46-.091.004-.188.079-.266.142-.425.343-.399.572.086.822.533.274.533.274.701.638.053-.291.102-.583.16-.873.033-.168.079-.333.119-.5.14.065.276.143.422.193.376.13.691.347.952.65.09.106.186.207.335.373l-1.124.517-.005.152c.459-.47.5.087.737.173-.026.05-.04.09-.048.09-.687-.114-.782.618-1.207.877-.035.022-.08.083-.073.112.09.337-.14.482-.34.672-.085.082-.098.266-.1.405-.003.117.057.236.09.354l-.092.05c-.055-.068-.126-.128-.162-.205-.168-.358-.384-.435-.752-.27a.495.495 0 0 1-.247.03c-.368-.04-.555.09-.624.449-.08.408.103.87.385.92.087.015.205-.061.284-.126.11-.09.198-.209.295-.315l.103.053-.142.613c.119.035.238.046.327.104.08.053.18.154.184.239.028.482.425.716.835.475.6-.353 1.192-.206 1.736.098.37.208.659.564 1.022.792.251.157.563.222.855.305.451.128.51.226.304.651-.152.314-.269.674-.5.915-.506.527-1.079.986-1.617 1.482-.458.422-1.224.548-1.254 1.382-.353-.038-.461-.232-.383-.535.109-.425.244-.844.355-1.27.111-.42.019-.79-.277-1.115m4.934-8.278l-.128.09-.47-.757.098-.07.5.737m.487 3.061c.028-.165.062-.333.055-.498a.946.946 0 0 1 .424-.863c.071-.05.24-.06.293-.01.144.137.313.3.361.482.263 1.008.355 2.031.134 3.148-.233-.259-.4-.224-.585-.023-.163.177-.298.147-.441-.085-.42-.685-.365-1.41-.24-2.15m-.288-2.535c-.02-.281-.034-.563-.056-.935.747.402.751 1.15 1.09 1.682l-.452-.537-.078 1.066c-.338-.259-.543-.46-.46-.847.028-.133-.033-.285-.044-.43M10.857 1C6.525 1 3 4.589 3 9s3.525 8 7.857 8c4.333 0 7.857-3.589 7.857-8s-3.524-8-7.857-8\"\n              ></path>\n            </svg>\n          </div>\n        </div>\n      </div>\n      <OperateBtn\n        style={{ marginBottom: '6px' }}\n        isSelf={isSelf}\n        concernUserFn={concernUserFn}\n      />\n    </BaseInfoWrapper>\n  )\n})\n","import styled from 'styled-components'\n\nexport const ListHeaderWrapper = styled.div`\n  position: relative;\n  background-color: #fff;\n  border-radius: 0.2rem 0.2rem 0 0;\n  border-bottom: 1px solid #ebebeb;\n  z-index: 100;\n  transition: all 0.24s;\n\n  .none {\n    display: none;\n  }\n\n  &.sticky,\n  &.stickyTop {\n    position: fixed;\n    left: 0;\n    right: 0;\n    width: 100%;\n  }\n\n  &.sticky {\n    top: 64px;\n  }\n\n  &.stickyTop {\n    top: 0;\n  }\n\n  .container {\n    justify-content: space-between;\n    max-width: 1000px;\n    margin: 0 auto;\n\n    .content {\n      display: flex;\n      background-color: #fff;\n      height: 50px;\n\n      & > a,\n      & > img {\n        width: 98px;\n        height: 50px;\n        justify-content: center;\n        color: #31445b;\n\n        &:hover {\n          opacity: 0.8;\n        }\n      }\n\n      .active {\n        color: #1890ff;\n        box-shadow: inset 0 -2px 0 #1890ff;\n      }\n    }\n  }\n\n  .ant-avatar {\n    background-color: transparent;\n  }\n`\n","import React, { memo, useState, useEffect, useRef } from 'react'\nimport { Link, NavLink } from 'react-router-dom'\n\nimport { getScrollTop } from '../../../../utils/scrollHeight'\nimport { throttle } from 'lodash'\n\nimport { Avatar } from 'antd'\nimport OperateBtn from '../operate-btn'\nimport noImg from '../../../../assets/user-center/default-avatar.png'\n\nimport { ListHeaderWrapper } from './style'\n\nexport default memo(function ListHeader(props) {\n  const { isSelf, concernUserFn, isShowHistory, avatar, type } = props\n  const [isFixed, setIsFixed] = useState(null)\n  // 利用useRef来记录上次滚动的距离而不是用一个变量，因为组件更新的时候变量会被重新赋值，从而影响判断\n  const topValue = useRef(0)\n  let scrollTop = 0\n  // 记录上一次的滚动距离，用于判断滚动方向\n\n  // 监听滚动条滑动到指定位置时，让导航栏固定;脱离指定位置时，让导航栏恢复正常\n  const fixNav = throttle(() => {\n    scrollTop = getScrollTop()\n    setTimeout(() => {\n      topValue.current = scrollTop\n    }, 0)\n    if (scrollTop < 251) {\n      setIsFixed(null)\n    }\n    // 大于一定距离并且下滚了，头部出现\n    if (scrollTop >= 251 && scrollTop < 700 && scrollTop >= topValue.current) {\n      setIsFixed(true)\n    }\n    if (scrollTop <= topValue.current && scrollTop >= 251) {\n      setIsFixed(true)\n    }\n    // 大于一定距离并且下滚了，头部出现\n    if (scrollTop >= 700 && scrollTop >= topValue.current) {\n      setIsFixed(false)\n    }\n    // 上滚\n  }, 200)\n\n  useEffect(() => {\n    window.addEventListener('scroll', fixNav)\n    return () => {\n      window.removeEventListener('scroll', fixNav)\n    }\n  }, [fixNav])\n\n  // 回到顶部的函数\n  const goTop = () => {\n    window.scrollTo(0, 0)\n  }\n\n  // 通过组件当前的状态来决定给nav栏添加什么样的类名\n  const addClassByState = () => {\n    if (isFixed) {\n      return 'sticky'\n    } else if (isFixed === false) {\n      return 'stickyTop'\n    } else {\n      return 'not-sticky'\n    }\n  }\n\n  const linkData = [\n    {\n      pathname: '',\n      title: '个人主页',\n    },\n    {\n      pathname: 'person',\n      title: '阅读历史',\n    },\n    {\n      pathname: 'likes',\n      title: isSelf ? '我的点赞' : '他的点赞',\n    },\n    {\n      pathname: 'collect',\n      title: isSelf ? '我的收藏' : '他的收藏',\n    },\n    {\n      pathname: 'concern',\n      title: isSelf ? '我的关注' : '他的关注',\n    },\n  ]\n\n  // 如果用户设置了阅读历史不可见，则不展示阅读历史给他人\n  isSelf || isShowHistory || linkData.splice(1, 1)\n\n  // 如果用户类型是媒体，则需要展现其发布的文章列表上添加一项\n  type === 'media' &&\n    linkData.splice(1, 0, {\n      pathname: 'released',\n      title: isSelf ? '我的文章' : '他的文章',\n    })\n\n  return (\n    <>\n      {isFixed !== null && (\n        <div className=\"blank\" style={{ height: '50px' }}></div>\n      )}\n      <ListHeaderWrapper className={addClassByState()}>\n        <div className=\"container middle-item\">\n          <div className=\"content\">\n            <Link\n              to=\"\"\n              onClick={goTop}\n              className={'middle-item' + (isFixed !== null ? '' : ' none')}\n            >\n              <Avatar\n                size={34}\n                src={\n                  <img\n                    src={avatar}\n                    alt=\"头像\"\n                    onError={(e) => {\n                      e.target.onError = null\n                      e.target.src = noImg\n                    }}\n                  />\n                }\n              />\n            </Link>\n            {linkData.map((item, index) => {\n              const { title, pathname } = item\n              return !index ? (\n                <NavLink\n                  key={title}\n                  to={pathname}\n                  end\n                  className=\"middle-item\"\n                  onClick={goTop}\n                >\n                  {title}\n                </NavLink>\n              ) : (\n                <NavLink\n                  key={title}\n                  to={pathname}\n                  className=\"middle-item\"\n                  onClick={goTop}\n                >\n                  {title}\n                </NavLink>\n              )\n            })}\n          </div>\n          <OperateBtn\n            isSelf={isSelf}\n            concernUserFn={concernUserFn}\n            style={{ display: isFixed !== null ? '' : 'none' }}\n          />\n        </div>\n      </ListHeaderWrapper>\n    </>\n  )\n})\n","import styled from 'styled-components'\n\nexport const UserCenterWrapper = styled.div`\n  display: flex;\n  position: relative;\n  max-width: 1000px;\n  margin: 11px auto 72px;\n\n  .ant-empty {\n    margin-top: 100px;\n  }\n\n  .ant-skeleton {\n    padding: 10px 20px;\n  }\n\n  .ant-spin {\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    margin-top: 10px;\n\n    .ant-spin-text {\n      margin-left: 15px;\n    }\n  }\n\n  .toBottom {\n    justify-content: center;\n    margin-top: 10px;\n    color: #666;\n    font-size: 14px;\n  }\n`\nexport const LeftContainerWrapper = styled.div`\n  flex: auto;\n  min-width: 0;\n`\n\nexport const ContentWrapper = styled.div`\n  min-height: 600px;\n  padding-bottom: 10px;\n  background-color: #fff;\n  overflow: hidden;\n  box-sizing: border-box;\n`\n","import React, { useState, useEffect, useCallback, useRef } from 'react'\nimport { Outlet, useLocation, useParams } from 'react-router'\nimport html2canvas from 'html2canvas'\n\nimport {\n  getSpendTimeYearly,\n  getUserInfo,\n  FocusAuthor,\n} from '../../services/user'\nimport { allUserInfoContext } from '../../models/context'\nimport { getLocal } from '../../utils/storage'\n\nimport { Button, message, Skeleton } from 'antd'\nimport RightContainer from './components/right-container'\nimport UserInfo from './components/base-info'\nimport ListHeader from './components/headline'\n\nimport {\n  UserCenterWrapper,\n  LeftContainerWrapper,\n  ContentWrapper,\n} from './style'\nimport axios from 'axios'\nimport instance from '../../utils/request'\n\nexport default function UserCenter() {\n  const { id: user_id } = useParams()\n  // 从本地获取用户自己的id，用于判断访问的是否为自己的主页\n  const { user_id: self_id } = JSON.parse(getLocal('userInfo') || '{}')\n  const { pathname } = useLocation()\n  // 存储标志变量用于决定还需不需要发请求\n  const flag = useRef(true)\n  const [isContentShow, setIsContentShow] = useState(true)\n  const domRef = useRef()\n  const [loading, setLoading] = useState(false)\n  // 获取dom操作并赋值给domRef\n  const getReportDom = useCallback((dom) => {\n    domRef.current = dom\n  }, [])\n\n  // 管理用户信息和日历热图的数据\n  const [contextInfo, setContextInfo] = useState({\n    userInfo: {},\n    calendarData: [],\n    isFollow: false,\n    getReportDom,\n  })\n\n  const isSelf = self_id === user_id\n\n  // 请求用户信息和日历热图数据，请求完成后取消loading效果\n  useEffect(() => {\n    if (flag.current) {\n      setIsContentShow(true)\n      const getInfo = async () => {\n        try {\n          const reqArr = [\n            getUserInfo({ user_id }),\n            getSpendTimeYearly({ user_id }),\n          ]\n          const resArr = await Promise.all(reqArr)\n          const { userInfo, is_follow } = resArr[0].data\n          const { data: calendarData } = resArr[1].data\n          setContextInfo({\n            isFollow: is_follow,\n            userInfo,\n            calendarData: calendarData\n              ? calendarData.map((item) => {\n                  return {\n                    date: new Date(item.date),\n                    count: item.count,\n                  }\n                })\n              : [],\n            getReportDom,\n          })\n        } catch (err) {\n          message.error('数据加载失败，请重试!')\n        } finally {\n          setIsContentShow(false)\n        }\n      }\n      getInfo()\n    }\n  }, [user_id, getReportDom])\n\n  // 点击关注按钮后发送请求关注/取消用户;注意：依赖一定要写对，否则可能会因为闭包而造成问题\n  const concernUserFn = useCallback(() => {\n    if (getLocal('token')) {\n      setContextInfo({\n        ...contextInfo,\n        isFollow: !contextInfo.isFollow,\n      })\n      FocusAuthor({ media_id: user_id })\n    } else {\n      message.warn('您还没有登录哦！')\n    }\n  }, [contextInfo, user_id])\n\n  // 判断当前是否需要展示年度图片\n  const getIsReport = () => {\n    // 根据路径判断用户当前是否处于年度报告页面，如果在，则不显示图片\n    const flagStr = pathname.substring(pathname.length - 6)\n    return flagStr !== 'report'\n  }\n\n  // 点击子组件的按钮后下载年度报告\n  const downLoadReport = useCallback(() => {\n    const dom = domRef.current\n    dom &&\n      html2canvas(dom).then(function (canvas) {\n        // 返回的canvas对象中有这么一个属性，里面的toDataURL方法可以将canvas转成图片地址\n        const imgUrl = canvas.toDataURL('image/png')\n        // 生成一个a元素\n        const a = document.createElement('a')\n        // 生成一个单击事件\n        const event = new MouseEvent('click')\n        // 将a的download属性设置为我们想要下载的图片名称\n        a.download = 'iNews年度报告总结.png'\n        // 将生成的URL设置为a.href属性\n        a.href = imgUrl\n        // 触发a的单击事件\n        a.dispatchEvent(event) // 这样点击了之后就会在本地下载链接上对应的了\n      })\n  }, [domRef])\n\n  return (\n    <allUserInfoContext.Provider value={contextInfo}>\n      <UserCenterWrapper>\n        <LeftContainerWrapper>\n          <Skeleton\n            active\n            loading={isContentShow}\n            paragraph={{ rows: 4 }}\n            round={true}\n          >\n            {getIsReport() && (\n              <>\n                <UserInfo isSelf={isSelf} concernUserFn={concernUserFn} />\n                <ListHeader\n                  isSelf={isSelf}\n                  avatar={contextInfo.userInfo.avatar}\n                  concernUserFn={concernUserFn}\n                  isShowHistory={contextInfo.userInfo.is_show_history}\n                  type={contextInfo.userInfo.type}\n                />\n              </>\n            )}\n            <ContentWrapper>\n              <Outlet />\n            </ContentWrapper>\n          </Skeleton>\n        </LeftContainerWrapper>\n        <RightContainer\n          isSelf={isSelf}\n          userInfo={contextInfo.userInfo}\n          downLoadReport={downLoadReport}\n        />\n      </UserCenterWrapper>\n    </allUserInfoContext.Provider>\n  )\n}\n","// 从本地存储中获取数据的函数\nexport const getLocal = (itemName) => {\n  return localStorage.getItem(itemName)\n}\n\n// 存取数据到本地的函数\nexport const setLocal = (itemName, item) => {\n  localStorage.setItem(itemName, item)\n}\n\n// 从会话存储中获取数据的函数\nexport const getSession = (itemName) => {\n  return sessionStorage.getItem(itemName)\n}\n\n// 存取数据到会话数据的函数\nexport const setSession = (itemName, item) => {\n  sessionStorage.setItem(itemName, item)\n}\n\n// 将取出来数据中的实体字符转为innerHTML能够解析成的标签形式\n// const escapeHtml = str => {\n//   const arrEntities = { lt: '<', gt: '>', nbsp: ' ', amp: '&', quot: '\"' }\n//   return (\n//     str && str.replace(/&(lt|gt|nbsp|amp|quot);/gi, function (all, t) {\n//       return arrEntities[t]\n//     })\n//   )\n// }\n","// 获取到顶部的距离\nexport const getScrollTop = () => {\n    let scrollTop = 0;\n    if (document?.documentElement && document?.documentElement?.scrollTop) {\n        scrollTop = document?.documentElement.scrollTop;\n    }\n    else if (document?.body) {\n        scrollTop = document?.body.scrollTop;\n    }\n    return scrollTop;\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE50lEQVR4nO1avYobSRD2I+gNVk9g9AAO/AjOnCrwA+gBDjbbmf5qoMGxQdHFgksWRxM4NNxEF9kgjoODYwPBBQv3t7rganQ15Z5RV/eMxhh9MNFud/32V9VdevbsiiuuuGImeO8XRVEs59ZjUrCRL4noFkANoAGwB3AAcBTfnv++IyJfFMXLuXVPRms0gG3AUOu3A7Ce26YoeO8XROR7jD5wlJs2ys65DRHdcnZsOQP2fc4gIj+3jUF47xcA1gHlDwBq59zGe7+w7Mn77XocuZ7IFDs41RulZANgbTW6D865VwHnNrPzhHNuo9L9kBJto7yOI5xzmylkDUKc9YsYrsGOmIcb+LzvlPGvLqYAA8BKZV8zeQACxjdzNjJFUSwV/9STClRpn+TxoiiWXP48l74tEd3mZBGXz1PfkLrPINS5MxvfUy36Gp+VZW/OTLn32mTcOajzdrAoyGv7DB/qErcWHdkJp/1GLZHCABPhcdQ7ZZK7vpXOIK7120CtXxrlnWQZTOyHTH0iuo1dF2DpOiZzeJ2s9QfLccN/HeQ4R4HTqlVmH6uIWndMbIVlNpjYXcjOywJOV3PHJdflNCmpxCazwJK1HShSiY4+12bzuoG9ks605K2kXoVJyex9yRljdIhyPwuzZ3MB/u/4rCTUNiWNWWgAnIlJpVFkoq05UiRmWjzG2Q/suU9xqiBSGxmmpr88s8nkE0CqIal2dFjc2IicHDDmPV2WRMu65OMjzr8p5aTAkTOg1WefsLatBvG9hCAy8/UymXiG99xn6FObnScEmliX156qh3Vtz36rnKwSV/h4fXKYPLv+Ksg3iJQbnuSzqHKey+SKeNK6MIZi8aTXHhWQ89d4aUAqk6vHkyTF9SNH6v1eOiA6GGMwOboXmZ2xm1wJLslqqlQrvYxVIJvJ9ZUYERMd7/0iMGvIeu1N6iGSamcAgVfbI4Cdc27DE+PnAFZieqz/t8596k7qaZJq5wCI6Hvn3FEZN/T9PtagJSmYsvTkKHFmWnzu2+d2k+pNI76nSb5ECMEDhjdE9IGIfiCi9wDu+fvY56hUEpR2mN4mlOdMRMgvs3tlRM3kdrYOt4OTwB5NVB0XQOKbRrvYfAVVk6MjIl+C+8AR7BCjpTdB4ptGuzi6peWM2Yr/H/VHDIFp8FluUOlvb+hUSztYDaCmxTlR74MaepwNiqhk6e24vEj0CVTRmcT4FtoJfcQmo5/1NKe6uS+4gAUlzQxTocdfOrrqDmEnPw30DBm0oEsY30I5oUNwqaO8QciS1N7K1PRntOcvg047rRO688isoUwHOu24h28FTf/TlAA0SQfmkeP+bEeVxd9i2XhKqL7j/eQZiS/n9/kkkwH1Cp3P+jEgog/CAY9z/kiqqqobAH8KfaY/jiz0UQh9AvB6UqEBFEXxBsBfswUDwGfVlEzz6ywFDsA9O76V/0tVVTeXkN8BKyI54dE5924qeXd3dxuVfRdzfC8AvAHwz1SO8N4vQoZzBhRjyBgFzrnQT9uPRPQZwFvLXlVV3ZRl+R0R/QTg74Dh97OkfAwCx0J+D0T0q3PuExHVzrl3/O2I6EcADxzpp8DaJyKqiej53DZGgTPiYcAZMd8Td5z3ZVm+mNumZAAoOMIHVbq0sX9wBvwM4O1Xm+ZjoSzLFwBef/OGXnHFFV8t/gWFCJ5xlnjv0QAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/report-enter.3c025004.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAktJREFUWEftlr+LE1EQx7+zIMQgCiKChXCIcBZqowgighbXiNjoNYIggjGcsG9eWsEfIAgW7mwCeid3EEQbC0FEEKsrrlHwH7ASvcrjIHCNFsnIk+RI4m72ZXMmzb1yd3589jszb5Yw4UMTzo9tgFwKGGNmiWhNRJZHLeHQAMy8AKAEYFlEzo8NoFwu7y8UCi8BzLSTjg+AmU8DeAHgcNcXjweAma8BqAMI+uT+/wDW2geqejelzq4B36nqTyJazduQqU1orX2lqleHaLINIvqgqh9FZNHXLxGAmT8BOOUbJMHOqVMTkTdZMf4BYOZ1AHuzHD3fP280GqZer/9Ks+8BsNa+VtVZz+BeZkT0BcBcFEWfkxx6AJhZvaLmMGq1Wmer1epKv2sPQBiGJ4IgeDpi/dPw3ovIxYEA7iUzHyCiRVW9kONDs1zmRORZt1HiFJRKpR3FYnEJgLuEtvJ8bzabJ2u12lon6MBlZIx5QkQ2heC3qq4S0Q8A34hoXVWPAzgC4GBq1xPdjqLIlfnvydyGzHwHwMOkWU/bhsx8HcA9AFNZfpkALoAx5hYRzfcFG7gLmHmKiB4njPVXEZn2VqBjWKlULqvqkqruaT/zWkYJd8uGiOweGqA9IecAuOY8NMwPCTO7+T/TSSoim8p7laBb+jAMjwZBcMU9E5H7PiNijLlERG+3BMAnYZINMzvlbrTB8yuQF8AYM01EK6q6K47jnbl6IG/yjp8x5hGAm3Ec75sIgLX2mPuLiqJo834YuglHVaHffxtg4gr8AR7XyCHq+TrXAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAjlJREFUWEftlsFLFVEUxn/nlQshCkKcmSCQCGxRbYogIqhFm4g25SYQIqjAwDdvHZRBEBQ48wgsIyGiNi2CkCBauXBT0D/QSkrwlrgIIWrjFyMqz+c8vfNe+jbOcuY75/zud8+9Z4w2P9bm+mwDNOVAmKoPMesqNtHqFhYGCBKNmnEDmHCxnd0ygOCRuunglcG5paJbB9Cd6GTJeAkcrFnx1gBEVfVLvABKdXZvPkCY6h5wp8E+T5gYx/gpMd1sQzZswijVa8GVAk02D3yQ8fFH2Z77xuUChFV9QpzwTZKjy9x5PFOxtxvlWAMQppoD9m4U6PNd4lnnL8pTQ/ankX4VQJjqDdDnk7yA5gslBtygfc6LqQdQgcSFpAanZ2KbrA9aBRBVdUww0uL+54MZ713ZLqwLkH3sShTtNLIuPl9oiT5iMeAq9qRWmn8MR9UR/mYMo98nbwHNN0ocd4M2uxyz7jAKUg0bVBoU+AtMA9+BKWDO4KjEIYz960DdcrGNeAFkoijRbRn38856o2kYJrqKcRfo2SjOaxxHqW4KnhaZBWGiHoyHa461+Ooq1uvtwLIwSnVJMAbsWXrnNYxy7pZ5F9vuwgBZQJjoDLYIcaDID0mQatLg1HJRF9uK815bUGt9UNVhW+By9s5VbMjnBASpLhq8+y8APgXzNGFVY4hri+CtONAswL5UvQuQXcW7XGydTfVAs8VrGvmB4LqLrastAMGwjtgOxl3ZVu6Hwk3Yqgv18dsAbXfgH4olsyEmCIv8AAAAAElFTkSuQmCC\""],"sourceRoot":""}