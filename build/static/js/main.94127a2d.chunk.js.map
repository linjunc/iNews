{"version":3,"sources":["utils/request.js","style.js","components/AfterModal/style.js","components/AfterModal/index.jsx","router/index.js","models/reducer/article.js","models/reducer/userInfo.js","App.js","reportWebVitals.js","index.js","models/constant.js","services/user.js","models/context/index.js"],"names":["instance","axios","create","baseURL","process","timeout","headers","Authorization","interceptors","request","use","config","localStorage","getItem","console","log","token","JSON","parse","error","Promise","reject","response","data","code","window","removeItem","location","href","status","resolve","isCancel","GlobalStyle","createGlobalStyle","ModalContainer","styled","div","DrawerBox","AfterModal","navigate","useNavigate","useContext","articleContext","articleData","article","dispatch","useState","visible","setVisible","placement","content","onClick","title","onClose","itemLayout","dataSource","renderItem","className","id","item_id","src","image_url","alt","like_count","publish_time","article_id","size","e","type","DELETE_ARTICLE","message","success","Header","lazy","Home","Login","Detail","User","CovidMap","PersonalPage","Concern","ReadingReport","UserSetting","UserProfile","UserAccount","ConcernTags","ConcernFollow","NewsList","lazyLoad","children","fallback","active","routes","path","element","getNewsFn","getHistoryList","getCollectList","getLikeList","getMediaNewsList","to","getFollowListFn","getFollowersList","isFollower","getFollowingList","Article","state","action","INIT_ARTICLE","ADD_ARTICLE","res","findIndex","item","setItem","stringify","deleteIndex","splice","UserInfo","INIT_INFO","EDIT_INFO","userInfo","DELETE_INFO","App","useRoutes","AppWrapper","initRef","useRef","userRef","useReducer","userDispatch","useEffect","current","Provider","value","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","getUserInfo","options","url","method","params","FocusAuthor","setUserInfo","uploadAvatar","uploadUserInfo","getSpendTimeYearly","getReadingTimeRank","setShowHistory","getTagsList","focusTags","cancelToken","upLoadAvatarToBed","getAllTags","createContext","userContext","headerShowContext","allUserInfoContext","userInfoContext"],"mappings":"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","file":"static/js/main.94127a2d.chunk.js","sourcesContent":["import axios from 'axios'\n// import { url } from '../services/baseUrl'\n\nconst instance = axios.create({\n  baseURL: process.env.REACT_APP_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n    Authorization: '',\n  },\n})\n\n// 请求拦截器\ninstance.interceptors.request.use(\n  (config) => {\n    // JWT 认证\n    // localStorage.setItem(\"token\",JSON.stringify(\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxYWM3OTAzNDVjMzZkYjZhM2JjY2JlNiIsImFjY291bnQiOiIxMjMiLCJwYXNzd29yZCI6IjEyMyIsImlhdCI6MTYzODg3NTY4MywiZXhwIjoxNjQ0MDU5NjgzfQ.XSmNHJYiIDXIKRr1YokVQPivYiydtlIYb5xmEBiLisw\"))\n    if (localStorage.getItem('token')) {\n      console.log(1)\n      const token = JSON.parse(localStorage.getItem('token'))\n      config.headers['Authorization'] = `${token}`\n    } else {\n      console.log('删除 token 了')\n      delete config.headers['Authorization']\n    }\n    console.log('请求拦截器 成功')\n    return config\n  },\n  (error) => Promise.reject(error),\n)\n\n// 响应拦截器\ninstance.interceptors.response.use(\n  (response) => {\n    // 认证失败\n    if (response.data.code === 401) {\n      //用户token失效\n      //清空用户信息\n      window.localStorage.removeItem('token')\n      window.location.href = '/login' //返回登录页\n      return Promise.reject('用户token失效') //接口Promise返回错误状态，错误信息msg可有后端返回，也可以我们自己定义一个码--信息的关系。\n    }\n    if (response.status !== 200) {\n      //接口请求失败，具体根据实际情况判断\n      return Promise.reject('状态码错误') //接口Promise返回错误状态\n    }\n    console.log(2)\n    return Promise.resolve(response)\n  },\n  (error) => {\n    if (axios.isCancel(error)) {\n      console.log('请求被取消了！')\n      //   throw new axios.Cancel('cancel request')\n      // 其实可以不用写这行代码，如果请求错误内部会帮我们封装好，error就是Cancel对象\n    } else {\n      console.log('请求错误')\n    }\n    return Promise.reject(error)\n  },\n)\n\nexport default instance\n","import { createGlobalStyle } from \"styled-components\";\n// 初始化样式\nexport const GlobalStyle = createGlobalStyle`\n\n    html, body, div, span, applet, object, iframe,\n    h1, h2, h3, h4, h5, h6, p, blockquote, pre,\n    a, abbr, acronym, address, big, cite, code,\n    del, dfn, em, img, ins, kbd, q, s, samp,\n    small, strike, strong, sub, sup, tt, var,\n    b, u, i, center,\n    dl, dt, dd, ol, ul, li,\n    fieldset, form, label, legend,\n    table, caption, tbody, tfoot, thead, tr, th, td,\n    article, aside, canvas, details, embed, \n    figure, figcaption, footer, header, hgroup, \n    menu, nav, output, ruby, section, summary,\n    time, mark, audio, video {\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n    }\n    /* HTML5 display-role reset for older browsers */\n    article, aside, details, figcaption, figure, \n    footer, header, hgroup, menu, nav, section {\n        display: block;\n    }\n    body {\n        line-height: 1;\n        min-width: 1200px;\n        margin: 0 auto;\n        background-color: #f4f5f5;\n    }\n    ol, ul {\n        list-style: none;\n    }\n    blockquote, q {\n        quotes: none;\n    }\n    blockquote:before, blockquote:after,\n    q:before, q:after {\n        content: '';\n        content: none;\n    }\n    table {\n        border-collapse: collapse;\n        border-spacing: 0;\n    }\n`","import styled from \"styled-components\";\n\nexport const ModalContainer = styled.div`\n    position: fixed;\n    top: 0;\n    right: 0;\n    width: 30px;\n    height: 100vh;\n    background-color: #74b9ff;\n    opacity: .1;\n    transition: all .5s;\n    cursor: pointer;\n    :hover {\n        opacity: .3;\n    }\n    \n`\nexport const DrawerBox = styled.div`\n    display: flex;\n    align-items: center;\n    .author-article {\n        display: flex;\n        margin: 20px 0;\n        cursor: pointer;\n        width: 100%;\n        .article-list-img {\n            margin-right: 10px;\n            img {\n                width: 94px;\n                height: 70px;\n            }\n        }\n        .article-list-right {\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            flex: 1;\n            .article-list-title {\n                max-height: 48px;\n                font-size: 16px;\n                line-height: 24px;\n                color: #222;\n                display: -webkit-box;\n                overflow: hidden;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n                text-overflow: ellipsis;\n            }\n            .article-list-num {\n                display: flex;\n                flex-direction: row;\n                justify-content: space-between;\n                font-size: 12px;\n                color: #999999;\n            }\n        }\n    } \n`","import React, { useContext, useState } from 'react'\nimport { Popover, Drawer, List, Button, message } from 'antd'\nimport { useNavigate } from 'react-router'\nimport { articleContext } from '../../models/context'\nimport { ModalContainer, DrawerBox } from './style'\nimport { DELETE_ARTICLE } from '../../models/constant'\n\n// 写错了不想改，应该是 Drawer\nconst AfterModal = () => {\n  const navigate = useNavigate()\n  const { article: articleData, dispatch } = useContext(articleContext)\n  const [visible, setVisible] = useState(false)\n  // 侧边栏文章详情跳转\n  const getSideDetail = (id) => {\n    navigate(`/detail/${id}`)\n  }\n  const deleteArticle = (id) => {\n    dispatch({ type: DELETE_ARTICLE, id })\n    message.success('移除成功')\n  }\n  const showDrawer = () => {\n    setVisible(true)\n  }\n\n  const onClose = () => {\n    setVisible(false)\n  }\n\n  return (\n    <div>\n      <Popover placement=\"left\" content=\"点我试试\">\n        <ModalContainer onClick={showDrawer} />\n      </Popover>\n      <Drawer title=\"稍后再看新闻列表\" onClose={onClose} visible={visible}>\n        <List\n          itemLayout=\"vertical\"\n          dataSource={articleData}\n          renderItem={(article) => (\n            <DrawerBox>\n              <div\n                key={article?.article_id}\n                className=\"author-article\"\n                onClick={() => getSideDetail(article?.item_id)}\n              >\n                <div className=\"article-list-img\">\n                  <img src={article?.image_url} alt=\"\" />\n                </div>\n                <div className=\"article-list-right\">\n                  <div className=\"article-list-title\">{article?.title}</div>\n                  <div className=\"article-list-num\">\n                    <div className=\"article-read\">\n                      {article?.like_count} 阅读\n                    </div>\n                    <div className=\"article-time\">{article?.publish_time}</div>\n                  </div>\n                </div>\n              </div>\n              <Button\n                size=\"small\"\n                onClick={(e) => deleteArticle(article?.item_id)}\n              >\n                移除\n              </Button>\n            </DrawerBox>\n          )}\n        />\n      </Drawer>\n    </div>\n  )\n}\n\nexport default AfterModal\n","import { lazy, Suspense } from 'react'\nimport { Skeleton } from 'antd'\nimport { Navigate } from 'react-router'\n\n// 由于个人主页文章列表那里共用了一个组件，所以需要传入不同的请求文章函数以及传入不同的请求关注列表函数\nimport {\n  getLikeList,\n  getCollectList,\n  getHistoryList,\n  getMediaNewsList,\n  getFollowingList,\n  getFollowersList,\n} from '../services/user'\n\nconst Header = lazy(() => import('../layout/Header'))\n// import Header from '../layout/Header'\n// import Home from '../pages/home'\n// 配置懒加载\nconst Home = lazy(() => import('../pages/home'))\nconst Login = lazy(() => import('../pages/login'))\nconst Detail = lazy(() => import('../pages/detail'))\nconst User = lazy(() => import('../pages/user'))\nconst CovidMap = lazy(() => import('../pages/covidMap'))\n// 为个人中心中的组件配置懒加载\nconst PersonalPage = lazy(() =>\n  import('../pages/user/components/personal-page'),\n)\nconst Concern = lazy(() => import('../pages/user/components/concern'))\nconst ReadingReport = lazy(() =>\n  import('../pages/user/components/reading-report'),\n)\nconst UserSetting = lazy(() => import('../pages/user-setting'))\nconst UserProfile = lazy(() =>\n  import('../pages/user-setting/components/user-profile'),\n)\nconst UserAccount = lazy(() =>\n  import('../pages/user-setting/components/user-account'),\n)\nconst ConcernTags = lazy(() =>\n  import('../pages/user/components/concern/components/tags'),\n)\nconst ConcernFollow = lazy(() =>\n  import('../pages/user/components/concern/components/follow'),\n)\nconst NewsList = lazy(() => import('../pages/user/components/news-list'))\n\n// 解决懒加载白屏时间\nconst lazyLoad = (children) => {\n  return <Suspense fallback={<Skeleton active />}>{children}</Suspense>\n}\n\n// 路由配置\nconst routes = [\n  {\n    path: '/',\n    element: lazyLoad(<Header />),\n    children: [\n      {\n        path: '/',\n        element: lazyLoad(<Home />),\n      },\n      {\n        path: '/detail/:id',\n        element: lazyLoad(<Detail />),\n      },\n      {\n        path: '/user/:id',\n        element: lazyLoad(<User />),\n        children: [\n          {\n            path: '',\n            element: lazyLoad(<PersonalPage />),\n          },\n          {\n            path: 'person',\n            element: lazyLoad(<NewsList getNewsFn={getHistoryList} />),\n          },\n          {\n            path: 'collect',\n            element: lazyLoad(<NewsList getNewsFn={getCollectList} />),\n          },\n          {\n            path: 'likes',\n            element: lazyLoad(<NewsList getNewsFn={getLikeList} />),\n          },\n          {\n            path: 'released',\n            element: lazyLoad(<NewsList getNewsFn={getMediaNewsList} />),\n          },\n          {\n            path: 'concern',\n            element: lazyLoad(<Concern />),\n            children: [\n              {\n                path: '',\n                element: <Navigate to=\"followers\" />,\n              },\n              {\n                path: 'tags',\n                element: lazyLoad(<ConcernTags />),\n              },\n              {\n                path: 'followers',\n                element: lazyLoad(\n                  <ConcernFollow\n                    getFollowListFn={getFollowersList}\n                    isFollower={true}\n                  />,\n                ),\n              },\n              {\n                path: 'following',\n                element: lazyLoad(\n                  <ConcernFollow getFollowListFn={getFollowingList} />,\n                ),\n              },\n            ],\n          },\n          {\n            path: 'report',\n            element: lazyLoad(<ReadingReport />),\n          },\n        ],\n      },\n      {\n        path: '/user/setting',\n        element: lazyLoad(<UserSetting />),\n        children: [\n          {\n            path: '',\n            element: <Navigate to=\"profile\" />,\n          },\n          {\n            path: 'profile',\n            element: lazyLoad(<UserProfile />),\n          },\n          {\n            path: 'account',\n            element: lazyLoad(<UserAccount />),\n          },\n        ],\n      },\n      {\n        path: 'covidMap',\n        element: lazyLoad(<CovidMap />),\n      },\n    ],\n  },\n  {\n    path: 'login',\n    element: lazyLoad(<Login />),\n  },\n]\n\n// 导出\nexport default routes\n","import {\n    ADD_ARTICLE,\n    DELETE_ARTICLE,\n    INIT_ARTICLE\n} from \"../constant\"\n\n// state [{},{},{}]\nexport const Article = (state, action) => {\n    switch (action.type) {\n        case INIT_ARTICLE:\n            return [...action.articleData]\n        case ADD_ARTICLE:\n            const addIndex = state.findIndex(item => item.item_id === action.article.item_id) // 看看有没有这个id\n            const res = addIndex === -1 ? [action.article, ...state] : state\n            localStorage.setItem('articleLater', JSON.stringify(res))\n            return res\n        case DELETE_ARTICLE:\n            const deleteIndex = state.findIndex(item => item.item_id === action.id)\n            deleteIndex !== -1 && state.splice(deleteIndex, 1)\n            localStorage.setItem('articleLater', JSON.stringify([...state]))\n            return [...state]\n        default:\n            return state\n    }\n}","import { INIT_INFO, EDIT_INFO, DELETE_INFO } from '../constant'\nexport const UserInfo = (state, action) => {\n  switch (action.type) {\n    case INIT_INFO:\n      return action.userInfo\n    case EDIT_INFO:\n      return action.userInfo\n    case DELETE_INFO:\n      return null\n    default:\n      return state\n  }\n}\n","import { GlobalStyle } from './style.js'\nimport { BrowserRouter as Router, useRoutes } from 'react-router-dom'\nimport './App.css'\nimport AfterModal from './components/AfterModal'\nimport routes from './router'\nimport { articleContext, userContext } from './models/context'\nimport { Article } from './models/reducer/article.js'\nimport { useEffect, useReducer, useRef } from 'react'\nimport { INIT_ARTICLE, INIT_INFO } from './models/constant.js'\nimport { UserInfo } from './models/reducer/userInfo.js'\n\nfunction App() {\n  const element = useRoutes(routes)\n  return element\n}\n\nconst AppWrapper = () => {\n  const initRef = useRef([])\n  const userRef = useRef(null)\n  const [article, dispatch] = useReducer(Article, [])\n  const [userInfo, userDispatch] = useReducer(UserInfo, null)\n  useEffect(() => {\n    // 获取本地的稍后再看数据\n    initRef.current = JSON.parse(localStorage.getItem('articleLater')) ?? []\n    dispatch({\n      type: INIT_ARTICLE,\n      articleData: initRef.current,\n    })\n    // 在 APP 里初始化，之后的修改都通过reducer触发\n    // 在本地有 token 的时候，为用户登录，如果token已经失效，就不显示头像，这里采用静默处理\n    if (localStorage.getItem('token')) {\n      userRef.current = JSON.parse(localStorage.getItem('userInfo')) ?? {}\n      userDispatch({\n        type: INIT_INFO,\n        userInfo: userRef.current,\n      })\n    }\n  }, [])\n  return (\n    <Router>\n      <userContext.Provider value={{ userInfo, userDispatch }}>\n        <articleContext.Provider value={{ article, dispatch }}>\n          <App />\n          <AfterModal />\n        </articleContext.Provider>\n      </userContext.Provider>\n      <GlobalStyle />\n    </Router>\n  )\n}\nexport default AppWrapper\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","export const ADD_ARTICLE = 'add_article'\nexport const DELETE_ARTICLE = 'delete_article'\nexport const INIT_ARTICLE = 'init_article'\n\nexport const INIT_INFO = 'init_info'\nexport const EDIT_INFO = 'edit_info'\nexport const DELETE_INFO = 'delete_info'\n","import axios from 'axios'\nimport instance from '../utils/request'\n\n// 通过 token 来获取用户信息\nexport const getUserInfo = (options) => {\n  return instance({\n    url: '/user_info',\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    params: options,\n  })\n}\n\n// 关注作者\nexport const FocusAuthor = (options) => {\n  return instance({\n    url: '/follow_media',\n    method: 'PUT',\n    data: options,\n  })\n}\n\n// 更改用户信息\nexport const setUserInfo = (options) => {\n  return instance({\n    url: '/set_user_info',\n    method: 'PUT',\n    data: options,\n  })\n}\n\n// 更改用户头像\nexport const uploadAvatar = (options) => {\n  return instance({\n    url: '/avatar_upload',\n    method: 'PUT',\n    data: options,\n  })\n}\n\n// 更改用户信息\nexport const uploadUserInfo = (options) => {\n  return instance({\n    url: '/set_user_info',\n    method: 'PUT',\n    data: options,\n  })\n}\n\n// 获取用户一年中浏览的时间用于生成日历热图\nexport const getSpendTimeYearly = (options) => {\n  return instance({\n    url: '/calendar_hot_graph',\n    method: 'GET',\n    params: options,\n  })\n}\n\n// 获取新闻类别阅读时间排名\nexport const getReadingTimeRank = (options) => {\n  return instance({\n    url: '/reading_time_rank',\n    method: 'GET',\n    params: options,\n  })\n}\n\n// 获取用户关注者列表\nexport const getFollowersList = (options) => {\n  return instance({\n    url: '/follower',\n    method: 'GET',\n    params: options,\n  })\n}\n\n// 修改是否展示浏览历史记录\nexport const setShowHistory = (options) => {\n  return instance({\n    url: '/set_show_history',\n    method: 'PUT',\n    data: options,\n  })\n}\n\n// 获取关注的人列表\nexport const getFollowingList = (options) => {\n  return instance({\n    url: '/follow_list',\n    method: 'GET',\n    params: options,\n  })\n}\n\n// 获取用户关注的标签\nexport const getTagsList = (options) => {\n  return instance({\n    url: '/tag_list',\n    method: 'GET',\n    params: options,\n  })\n}\n\n// 设置用户关注标签\nexport const focusTags = (options) => {\n  return instance({\n    url: '/set_tag_list',\n    method: 'PUT',\n    data: options,\n  })\n}\n\n// 获取用户点赞了的新闻列表\nexport const getLikeList = (options, cancelToken) => {\n  return instance({\n    url: 'article_list_digg',\n    method: 'GET',\n    params: options,\n    cancelToken,\n  })\n}\n\n// 获取用户收藏了的文章列表\nexport const getCollectList = (options, cancelToken) => {\n  return instance({\n    url: '/article_list_like',\n    method: 'GET',\n    params: options,\n    cancelToken,\n  })\n}\n\n// 获取浏览新闻历史记录\nexport const getHistoryList = (options, cancelToken) => {\n  return instance({\n    url: '/history_list',\n    method: 'GET',\n    params: options,\n    cancelToken,\n  })\n}\n\n// 获取媒体对应的文章列表\nexport const getMediaNewsList = (options) => {\n  return instance({\n    url: 'article_list_user',\n    method: 'GET',\n    params: options,\n  })\n}\n\n// 上传头像到图床的函数,不知道为什么使用instance会有跨域问题，直接使用axios就没有\nexport const upLoadAvatarToBed = (options) => {\n  return instance({\n    url: '/save_file_oss',\n    // 请求类型\n    method: 'POST',\n    // 设置请求体，在 params 中设置的参数最后都将变为url参数跟在请求行地址的后面\n    data: options,\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n  })\n}\n\n// 获取全部标签\nexport const getAllTags = (options) => {\n  return instance({\n    url: '/tag_list_all',\n    method: 'GET',\n    params: options,\n  })\n}\n","import { createContext } from 'react'\n\nexport const articleContext = createContext([])\nexport const userContext = createContext({})\nexport const headerShowContext = createContext()\n// 这个context包括了日历热图、是否关注等信息\nexport const allUserInfoContext = createContext({})\n// 这个context只有用户信息\nexport const userInfoContext = createContext({})\n"],"sourceRoot":""}