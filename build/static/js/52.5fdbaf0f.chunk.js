(this.webpackJsonpinews=this.webpackJsonpinews||[]).push([[52],{1032:function(e,n,t){"use strict";t.r(n);var a,r=t(290),c=t.n(r),i=t(306),o=t(291),s=t(35),l=t(0),u=t(297),f=t(45),p=t(69),d=t(33),b=t(169),m=t(272),j=t(474),O=t(308),v=t(67),g=t(68),x=g.b.div(a||(a=Object(v.a)(["\n  margin-bottom: 20px;\n\n  .avatar-info {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-top: 10px;\n\n    .avatar-upload {\n      position: relative;\n      width: 90px;\n      height: 90px;\n      border-radius: 50%;\n      overflow: hidden;\n\n      .upload-input {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        color: #fff;\n        border-radius: 50%;\n        background-color: rgba(29, 33, 41, 0.5);\n        z-index: 2;\n        opacity: 0;\n        cursor: pointer;\n\n        &:hover {\n          opacity: 1;\n        }\n\n        & > .avatar-uploader {\n          height: 90px;\n        }\n\n        & > span {\n          font-size: 14px;\n          margin-top: 7px;\n        }\n\n        .add-icon {\n          width: 20px;\n          height: 20px;\n\n          svg {\n            fill: #fff;\n          }\n        }\n      }\n    }\n\n    .title {\n      margin: 10px 0 8px;\n      color: #1d2129;\n      font-size: 16px;\n    }\n  }\n\n  .upload-tip {\n    line-height: 17px;\n    font-size: 14px;\n    color: #86909c;\n  }\n\n  .ant-avatar {\n    background-color: transparent;\n  }\n"]))),h=t(7);function y(e){var n=e.transmitFormData,a=e.avatar,r=Object(l.useRef)(),c=Object(l.useState)(a||t(308).default),i=Object(s.a)(c,2),o=i[0],u=i[1],f=function(e){var n="image/jpeg"===e.type||"image/png"===e.type;n||b.b.error("\u4f60\u53ea\u53ef\u4ee5\u4e0a\u4f20 JPG/PNG \u683c\u5f0f\u7684\u6587\u4ef6!");var t=e.size/1024/1024<5;return t||b.b.error("\u56fe\u7247\u5927\u5c0f\u5fc5\u987b\u8981\u5c0f\u4e8e5MB!"),n&&t},p=function(e){var n=new FileReader;n.addEventListener("load",(function(){var e=n.result;u(e)})),n.readAsDataURL(e)};return Object(h.jsxs)(x,{children:[Object(h.jsxs)("div",{className:"avatar-info",children:[Object(h.jsxs)("div",{className:"avatar-upload",onClick:function(){r.current.click()},children:[Object(h.jsxs)("div",{className:"upload-input",children:[Object(h.jsx)("i",{className:"add-icon",children:Object(h.jsx)("svg",{className:"icon",viewBox:"0 0 1024 1024",children:Object(h.jsx)("path",{d:"M464.883436 464.883436V302.244035A23.732788 23.732788 0 0 1 488.616224 279.209271h46.069529a23.732788 23.732788 0 0 1 23.732788 23.034764v162.639401h162.6394a23.732788 23.732788 0 0 1 23.034765 23.732788v46.069529a23.732788 23.732788 0 0 1-23.034765 23.732788H558.418541v162.6394a23.732788 23.732788 0 0 1-23.732788 23.034765H488.616224a23.732788 23.732788 0 0 1-23.732788-23.034765V558.418541H302.244035A23.732788 23.732788 0 0 1 279.209271 534.685753V488.616224a23.732788 23.732788 0 0 1 23.034764-23.732788z m46.767552 465.581458a418.813906 418.813906 0 1 0-418.813906-418.813906 418.813906 418.813906 0 0 0 418.813906 418.813906z m0 92.837083a511.650988 511.650988 0 1 1 511.650989-511.650989 511.650988 511.650988 0 0 1-511.650989 511.650989z","p-id":"375018"})})}),Object(h.jsx)("span",{children:"\u70b9\u51fb\u4fee\u6539\u5934\u50cf"})]}),Object(h.jsx)(j.a,{size:90,icon:Object(h.jsx)("img",{src:o,alt:"\u5934\u50cf",onError:function(e){e.target.onerror=null,e.target.src=O.default}})}),Object(h.jsx)("input",{type:"file",className:"real-input",accept:"image/*",ref:r,onChange:function(){var e=r.current.files[0];f(e)&&(p(e),function(e){var t=new FormData;t.append("image",e),t.append("key","7a90dbbff3b9b99f97e481e6b89dead8"),n(t)}(e))}})]}),Object(h.jsx)("span",{className:"title",children:"\u6211\u7684\u5934\u50cf"})]}),Object(h.jsx)("p",{className:"upload-tip",children:"\u652f\u6301 jpg\u3001png\u3001jpeg \u683c\u5f0f\u5927\u5c0f 5M \u4ee5\u5185\u7684\u56fe\u7247"})]})}var w,A,N=t(1014),k=g.b.div(w||(w=Object(v.a)(["\n  position: relative;\n\n  textarea {\n    width: 440px;\n    padding: 0 48px 0 12px;\n    resize: none;\n    height: 30px;\n    line-height: 30px;\n    color: #1d2129;\n    background-color: #fafafa;\n    box-shadow: none;\n\n    &:focus {\n      background-color: #fff !important;\n      border-color: #1890ff !important;\n    }\n\n    &:hover {\n      border-color: #e5e6eb;\n      background-color: #e5e6eb;\n    }\n  }\n\n  .introduction {\n    textarea {\n      height: 140px;\n    }\n\n    &::after {\n      top: 122px !important;\n    }\n  }\n\n  .ant-input-textarea-show-count::after {\n    position: absolute;\n    right: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    margin-right: 10px;\n    font-size: 12px;\n  }\n"]))),E=N.a.TextArea,z=Object(l.memo)((function(e){var n=e.isIntroduction,t=e.maxLength,a=e.placeholder,r=e.value,c=Object(l.useState)(r),i=Object(s.a)(c,2),o=i[0],f=i[1];Object(l.useEffect)((function(){f(r)}),[r]);return Object(h.jsx)(k,{children:Object(h.jsx)(E,{value:o,showCount:!0,placeholder:a,maxLength:t,spellCheck:"false",className:n?"introduction":"name-input",onChange:function(e){return function(e){n?Object(u.d)("introduction",e):Object(u.d)("username",e),f(e)}(e.target.value)}})})})),C=g.b.div(A||(A=Object(v.a)(["\n  & > div {\n    flex-direction: column;\n  }\n\n  .items {\n    margin-bottom: 13px;\n    text-align: center;\n\n    .item {\n      display: inline-flex;\n      justify-content: center;\n      width: 556px;\n      padding: 20px 0;\n      border-bottom: 1px solid #f1f1f1;\n\n      .input-title {\n        width: 56px;\n        font-size: 14px;\n        color: #333;\n        margin-right: 20px;\n      }\n    }\n  }\n\n  .btn-wrapper {\n    display: flex;\n    margin: 50px;\n\n    button {\n      min-width: 88px;\n      margin: 0 auto;\n    }\n  }\n"])));n.default=Object(l.memo)((function(){var e=Object(l.useState)(null),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(l.useState)(!1),j=Object(s.a)(r,2),O=j[0],v=j[1],g=Object(l.useContext)(p.d),x=g.userInfo,w=g.userDispatch,A=Object(l.useContext)(p.e),N=A.userInfo,k=A.setStateFn,E=N.avatar,P=N.introduction,S=N.nickname,I=N.personal_page;Object(l.useEffect)((function(){Object(u.d)("username",S),Object(u.d)("introduction",P)}),[S,P]);var V=Object(l.useCallback)((function(e){a(e)}),[a]);return Object(h.jsxs)(C,{children:[Object(h.jsx)("h1",{className:"main-title",children:"\u4e2a\u4eba\u8d44\u6599"}),Object(h.jsx)("div",{className:"middle-item",children:Object(h.jsx)(y,{transmitFormData:V,avatar:E})}),Object(h.jsxs)("form",{className:"items",children:[Object(h.jsxs)("div",{className:"item middle-item",children:[Object(h.jsx)("span",{className:"input-title",children:"\u7528\u6237\u540d"}),Object(h.jsx)(z,{value:S,maxLength:30,placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d"})]}),Object(h.jsxs)("div",{className:"item middle-item",children:[Object(h.jsx)("span",{className:"input-title",children:"\u7b80\u4ecb"}),Object(h.jsx)(z,{value:P,maxLength:100,placeholder:"\u8bf7\u8f93\u5165\u4e2a\u4eba\u7b80\u4ecb",isIntroduction:!0})]})]}),Object(h.jsx)("div",{className:"btn-wrapper",children:Object(h.jsx)(m.a,{type:"primary",loading:O,onClick:function(){var e=S,n=P,a=Object(u.b)("username"),r=Object(u.b)("introduction");if(t||e!==a||n!==r){if(!a)return void b.b.warn("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01");v(!0);var l=[];t&&(l[0]=Object(f.p)(t)),e===a&&n===r||(l[1]=Object(f.r)({nickname:a,introduction:r,personal_page:I}));var p=function(){var e=Object(o.a)(c.a.mark((function e(){var n,t,o,p,m,j,O,g,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(l);case 3:if(n=e.sent,t=Object(s.a)(n,2),o=t[0],p=t[1],console.log(o),console.log(p),m=null,!o){e.next=16;break}return e.next=13,Object(f.q)({avatar:o.data.data.url});case 13:j=e.sent,O=j.data,m=null===O||void 0===O?void 0:O.avatar_url;case 16:b.b.success("\u4e2a\u4eba\u4fe1\u606f\u4fee\u6539\u6210\u529f\uff01"),g=JSON.parse(Object(u.a)("userInfo")),o?g.avatar=m:m=g.avatar,p&&(g.nickname=p.data.userInfo.nickname),Object(u.c)("userInfo",JSON.stringify(g)),h=Object(i.a)(Object(i.a)({},N),{},{avatar:m,introduction:r,nickname:a}),k&&k({userInfo:h,isLoading:!1}),w({type:d.d,userInfo:Object(i.a)(Object(i.a)({},x),{},{avatar:m,nickname:a})}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),b.b.error("\u4fe1\u606f\u4fee\u6539\u9519\u8bef\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5\uff01");case 29:return e.prev=29,v(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[0,26,29,32]])})));return function(){return e.apply(this,arguments)}}();p()}},children:"\u4fdd\u5b58\u4fee\u6539"})})]})}))},290:function(e,n,t){e.exports=t(171)},291:function(e,n,t){"use strict";function a(e,n,t,a,r,c,i){try{var o=e[c](i),s=o.value}catch(l){return void t(l)}o.done?n(s):Promise.resolve(s).then(a,r)}function r(e){return function(){var n=this,t=arguments;return new Promise((function(r,c){var i=e.apply(n,t);function o(e){a(i,r,c,o,s,"next",e)}function s(e){a(i,r,c,o,s,"throw",e)}o(void 0)}))}}t.d(n,"a",(function(){return r}))},297:function(e,n,t){"use strict";t.d(n,"a",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"b",(function(){return c})),t.d(n,"d",(function(){return i}));var a=function(e){return localStorage.getItem(e)},r=function(e,n){localStorage.setItem(e,n)},c=function(e){return sessionStorage.getItem(e)},i=function(e,n){sessionStorage.setItem(e,n)}},306:function(e,n,t){"use strict";function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}t.d(n,"a",(function(){return c}))},308:function(e,n,t){"use strict";t.r(n),n.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE50lEQVR4nO1avYobSRD2I+gNVk9g9AAO/AjOnCrwA+gBDjbbmf5qoMGxQdHFgksWRxM4NNxEF9kgjoODYwPBBQv3t7rganQ15Z5RV/eMxhh9MNFud/32V9VdevbsiiuuuGImeO8XRVEs59ZjUrCRL4noFkANoAGwB3AAcBTfnv++IyJfFMXLuXVPRms0gG3AUOu3A7Ce26YoeO8XROR7jD5wlJs2ys65DRHdcnZsOQP2fc4gIj+3jUF47xcA1gHlDwBq59zGe7+w7Mn77XocuZ7IFDs41RulZANgbTW6D865VwHnNrPzhHNuo9L9kBJto7yOI5xzmylkDUKc9YsYrsGOmIcb+LzvlPGvLqYAA8BKZV8zeQACxjdzNjJFUSwV/9STClRpn+TxoiiWXP48l74tEd3mZBGXz1PfkLrPINS5MxvfUy36Gp+VZW/OTLn32mTcOajzdrAoyGv7DB/qErcWHdkJp/1GLZHCABPhcdQ7ZZK7vpXOIK7120CtXxrlnWQZTOyHTH0iuo1dF2DpOiZzeJ2s9QfLccN/HeQ4R4HTqlVmH6uIWndMbIVlNpjYXcjOywJOV3PHJdflNCmpxCazwJK1HShSiY4+12bzuoG9ks605K2kXoVJyex9yRljdIhyPwuzZ3MB/u/4rCTUNiWNWWgAnIlJpVFkoq05UiRmWjzG2Q/suU9xqiBSGxmmpr88s8nkE0CqIal2dFjc2IicHDDmPV2WRMu65OMjzr8p5aTAkTOg1WefsLatBvG9hCAy8/UymXiG99xn6FObnScEmliX156qh3Vtz36rnKwSV/h4fXKYPLv+Ksg3iJQbnuSzqHKey+SKeNK6MIZi8aTXHhWQ89d4aUAqk6vHkyTF9SNH6v1eOiA6GGMwOboXmZ2xm1wJLslqqlQrvYxVIJvJ9ZUYERMd7/0iMGvIeu1N6iGSamcAgVfbI4Cdc27DE+PnAFZieqz/t8596k7qaZJq5wCI6Hvn3FEZN/T9PtagJSmYsvTkKHFmWnzu2+d2k+pNI76nSb5ECMEDhjdE9IGIfiCi9wDu+fvY56hUEpR2mN4mlOdMRMgvs3tlRM3kdrYOt4OTwB5NVB0XQOKbRrvYfAVVk6MjIl+C+8AR7BCjpTdB4ptGuzi6peWM2Yr/H/VHDIFp8FluUOlvb+hUSztYDaCmxTlR74MaepwNiqhk6e24vEj0CVTRmcT4FtoJfcQmo5/1NKe6uS+4gAUlzQxTocdfOrrqDmEnPw30DBm0oEsY30I5oUNwqaO8QciS1N7K1PRntOcvg047rRO688isoUwHOu24h28FTf/TlAA0SQfmkeP+bEeVxd9i2XhKqL7j/eQZiS/n9/kkkwH1Cp3P+jEgog/CAY9z/kiqqqobAH8KfaY/jiz0UQh9AvB6UqEBFEXxBsBfswUDwGfVlEzz6ywFDsA9O76V/0tVVTeXkN8BKyI54dE5924qeXd3dxuVfRdzfC8AvAHwz1SO8N4vQoZzBhRjyBgFzrnQT9uPRPQZwFvLXlVV3ZRl+R0R/QTg74Dh97OkfAwCx0J+D0T0q3PuExHVzrl3/O2I6EcADxzpp8DaJyKqiej53DZGgTPiYcAZMd8Td5z3ZVm+mNumZAAoOMIHVbq0sX9wBvwM4O1Xm+ZjoSzLFwBef/OGXnHFFV8t/gWFCJ5xlnjv0QAAAABJRU5ErkJggg=="},474:function(e,n,t){"use strict";var a=t(2),r=t(3),c=t(10),i=t(5),o=t(0),s=t(4),l=t.n(s),u=t(54),f=t(23),p=t(43),d=t(70),b=t(36),m=t(82),j=o.createContext("default"),O=function(e){var n=e.children,t=e.size;return o.createElement(j.Consumer,null,(function(e){return o.createElement(j.Provider,{value:t||e},n)}))},v=j,g=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t},x=function(e,n){var t,s,j=o.useContext(v),O=o.useState(1),x=Object(i.a)(O,2),h=x[0],y=x[1],w=o.useState(!1),A=Object(i.a)(w,2),N=A[0],k=A[1],E=o.useState(!0),z=Object(i.a)(E,2),C=z[0],P=z[1],S=o.useRef(),I=o.useRef(),V=Object(f.a)(n,S),R=o.useContext(p.b).getPrefixCls,H=function(){if(I.current&&S.current){var n=I.current.offsetWidth,t=S.current.offsetWidth;if(0!==n&&0!==t){var a=e.gap,r=void 0===a?4:a;2*r<t&&y(t-2*r<n?(t-2*r)/n:1)}}};o.useEffect((function(){k(!0)}),[]),o.useEffect((function(){P(!0),y(1)}),[e.src]),o.useEffect((function(){H()}),[e.gap]);var D=e.prefixCls,B=e.shape,F=e.size,T=e.src,q=e.srcSet,G=e.icon,M=e.className,Z=e.alt,J=e.draggable,X=e.children,Q=e.crossOrigin,U=g(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),Y="default"===F?j:F,L=Object(m.a)(),K=o.useMemo((function(){if("object"!==Object(c.a)(Y))return{};var e=b.b.find((function(e){return L[e]})),n=Y[e];return n?{width:n,height:n,lineHeight:"".concat(n,"px"),fontSize:G?n/2:18}:{}}),[L,Y]);Object(d.a)(!("string"===typeof G&&G.length>2),"Avatar","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(G,"` at https://ant.design/components/icon"));var W,_=R("avatar",D),$=l()((t={},Object(r.a)(t,"".concat(_,"-lg"),"large"===Y),Object(r.a)(t,"".concat(_,"-sm"),"small"===Y),t)),ee=o.isValidElement(T),ne=l()(_,$,(s={},Object(r.a)(s,"".concat(_,"-").concat(B),!!B),Object(r.a)(s,"".concat(_,"-image"),ee||T&&C),Object(r.a)(s,"".concat(_,"-icon"),!!G),s),M),te="number"===typeof Y?{width:Y,height:Y,lineHeight:"".concat(Y,"px"),fontSize:G?Y/2:18}:{};if("string"===typeof T&&C)W=o.createElement("img",{src:T,draggable:J,srcSet:q,onError:function(){var n=e.onError;!1!==(n?n():void 0)&&P(!1)},alt:Z,crossOrigin:Q});else if(ee)W=T;else if(G)W=G;else if(N||1!==h){var ae="scale(".concat(h,") translateX(-50%)"),re={msTransform:ae,WebkitTransform:ae,transform:ae},ce="number"===typeof Y?{lineHeight:"".concat(Y,"px")}:{};W=o.createElement(u.a,{onResize:H},o.createElement("span",{className:"".concat(_,"-string"),ref:function(e){I.current=e},style:Object(a.a)(Object(a.a)({},ce),re)},X))}else W=o.createElement("span",{className:"".concat(_,"-string"),style:{opacity:0},ref:function(e){I.current=e}},X);return delete U.onError,delete U.gap,o.createElement("span",Object(a.a)({},U,{style:Object(a.a)(Object(a.a)(Object(a.a)({},te),K),U.style),className:ne,ref:V}),W)},h=o.forwardRef(x);h.displayName="Avatar",h.defaultProps={shape:"circle",size:"default"};var y=h,w=t(41),A=t(26),N=t(273),k=function(e){var n=o.useContext(p.b),t=n.getPrefixCls,a=n.direction,c=e.prefixCls,i=e.className,s=void 0===i?"":i,u=e.maxCount,f=e.maxStyle,d=e.size,b=t("avatar-group",c),m=l()(b,Object(r.a)({},"".concat(b,"-rtl"),"rtl"===a),s),j=e.children,v=e.maxPopoverPlacement,g=void 0===v?"top":v,x=Object(w.a)(j).map((function(e,n){return Object(A.a)(e,{key:"avatar-key-".concat(n)})})),h=x.length;if(u&&u<h){var k=x.slice(0,u),E=x.slice(u,h);return k.push(o.createElement(N.a,{key:"avatar-popover-key",content:E,trigger:"hover",placement:g,overlayClassName:"".concat(b,"-popover")},o.createElement(y,{style:f},"+".concat(h-u)))),o.createElement(O,{size:d},o.createElement("div",{className:m,style:e.style},k))}return o.createElement(O,{size:d},o.createElement("div",{className:m,style:e.style},x))},E=y;E.Group=k;n.a=E}}]);
//# sourceMappingURL=52.5fdbaf0f.chunk.js.map